!function(){"use strict";var e=angular.module("orchestra.task.services");e.factory("requiredFields",["$rootScope","orchestraService",function(e,r){var t={validators:{"input-checkbox":[function(e){return e.checked}],"input-text":[function(e){return e.value&&e.value.length>0}]},setup:function(e){this.fields={},this.invalid=[],this.data=e},require:function(e,r){void 0===this.fields[e]?this.fields[e]=[r]:this.fields[e].push(r)},validate:function(){var r=this;r.invalid=[];for(var t in r.fields){var i=r.validators[t];if(i){var a=r.fields[t];a.forEach(function(e){var t=!0;i.forEach(function(r){t=t&&r(e)}),t||r.invalid.push(e)})}else console.error("Validators not found for field type:"+t)}return e.$broadcast("orchestra:task:validatedFields"),0===r.invalid.length},registerValidator:function(e,r){var t=this;void 0===t.validators[e]?t.validators[e].push(r):t.validators[e]=[r]}};return r.signals.registerSignal("submit.before",function(){return t.validate()?void 0:(alert("One or more required fields have not been filled out."),!1)}),t}]),angular.module("orchestra.task.directives").directive("orchestraRequiredField",["$compile","requiredFields",function(e,r){return{restrict:"EA",link:function(e,t,i){var a=t.find("input")[0],o=t.attr("data-error-class");if(o||(o=a.getAttribute("type")+"-error"),a&&"checkbox"!=a.getAttribute("type")&&"text"!=a.getAttribute("type"))return void console.error("Unsupported required field type.");r.require("input-"+a.getAttribute("type"),a);var n=function(){r.invalid.indexOf(a)>=0?t.addClass("required-field-error "+o):t.removeClass("required-field-error "+o)};n(),e.$on("orchestra:task:validatedFields",n)}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS90YXNrL2pzL3JlcXVpcmVkX2ZpZWxkcy5qcyJdLCJuYW1lcyI6WyJzZXJ2aWNlTW9kdWxlIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkcm9vdFNjb3BlIiwib3JjaGVzdHJhU2VydmljZSIsInJlcXVpcmVkRmllbGRzIiwidmFsaWRhdG9ycyIsImlucHV0LWNoZWNrYm94IiwiZWxlbSIsImNoZWNrZWQiLCJpbnB1dC10ZXh0IiwidmFsdWUiLCJsZW5ndGgiLCJzZXR1cCIsImRhdGEiLCJ0aGlzIiwiZmllbGRzIiwiaW52YWxpZCIsInJlcXVpcmUiLCJmaWVsZFR5cGUiLCJmaWVsZCIsInVuZGVmaW5lZCIsInB1c2giLCJ2YWxpZGF0ZSIsImZvckVhY2giLCJzdWNjZXNzIiwidmFsaWRhdG9yIiwiY29uc29sZSIsImVycm9yIiwiJGJyb2FkY2FzdCIsInJlZ2lzdGVyVmFsaWRhdG9yIiwic2lnbmFscyIsInJlZ2lzdGVyU2lnbmFsIiwiYWxlcnQiLCJkaXJlY3RpdmUiLCIkY29tcGlsZSIsInJlc3RyaWN0IiwibGluayIsInNjb3BlIiwiYXR0cnMiLCJmaW5kIiwiZXJyb3JDbGFzcyIsImF0dHIiLCJnZXRBdHRyaWJ1dGUiLCJ0b2dnbGVFcnJvciIsImluZGV4T2YiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiJG9uIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNFLFlBRUEsSUFBSUEsR0FBZ0JDLFFBQVFDLE9BQU8sMEJBTW5DRixHQUFjRyxRQUFRLGtCQUFBLGFBQUEsbUJBQWtCLFNBQVNDLEVBQVlDLEdBQzNELEdBQUlDLElBQ0ZDLFlBQ0VDLGtCQUVFLFNBQVNDLEdBQ1AsTUFBT0EsR0FBS0MsVUFHaEJDLGNBRUUsU0FBU0YsR0FDUCxNQUFPQSxHQUFLRyxPQUFTSCxFQUFLRyxNQUFNQyxPQUFTLEtBSS9DQyxNQUFPLFNBQVNDLEdBSWRDLEtBQUtDLFVBQ0xELEtBQUtFLFdBQ0xGLEtBQUtELEtBQU9BLEdBRWRJLFFBQVMsU0FBU0MsRUFBV0MsR0FNSUMsU0FBM0JOLEtBQUtDLE9BQU9HLEdBQ2RKLEtBQUtDLE9BQU9HLElBQWNDLEdBRTFCTCxLQUFLQyxPQUFPRyxHQUFXRyxLQUFLRixJQUdoQ0csU0FBVSxXQUtSLEdBQUlsQixHQUFpQlUsSUFDckJWLEdBQWVZLFVBSWYsS0FBSyxHQUFJRSxLQUFhZCxHQUFlVyxPQUFRLENBQzNDLEdBQUlWLEdBQWFELEVBQWVDLFdBQVdhLEVBQzNDLElBQUtiLEVBQUwsQ0FJQSxHQUFJVSxHQUFTWCxFQUFlVyxPQUFPRyxFQUNuQ0gsR0FBT1EsUUFBUSxTQUFTSixHQUN0QixHQUFJSyxJQUFVLENBQ2RuQixHQUFXa0IsUUFBUSxTQUFTRSxHQUMxQkQsRUFBVUEsR0FBV0MsRUFBVU4sS0FFNUJLLEdBQ0hwQixFQUFlWSxRQUFRSyxLQUFLRixTQVY5Qk8sU0FBUUMsTUFBTSx1Q0FBeUNULEdBZTNELE1BREFoQixHQUFXMEIsV0FBVyxrQ0FDbUIsSUFBbEN4QixFQUFlWSxRQUFRTCxRQUVoQ2tCLGtCQUFtQixTQUFTWCxFQUFXTyxHQUlyQyxHQUFJckIsR0FBaUJVLElBQ3dCTSxVQUF6Q2hCLEVBQWVDLFdBQVdhLEdBQzVCZCxFQUFlQyxXQUFXYSxHQUFXRyxLQUFLSSxHQUUxQ3JCLEVBQWVDLFdBQVdhLElBQWNPLElBYTlDLE9BUkF0QixHQUFpQjJCLFFBQVFDLGVBQ3ZCLGdCQUFpQixXQUNmLE1BQUszQixHQUFla0IsV0FBcEIsUUFDRVUsTUFBTSwwREFDQyxLQUlONUIsS0FXVEwsUUFBUUMsT0FBTyw2QkFDWmlDLFVBQVUsMEJBQUEsV0FBQSxpQkFBMEIsU0FBU0MsRUFBVTlCLEdBQ3RELE9BQ0UrQixTQUFVLEtBQ1ZDLEtBQU0sU0FBU0MsRUFBTzlCLEVBQU0rQixHQUMxQixHQUFJbkIsR0FBUVosRUFBS2dDLEtBQUssU0FBUyxHQUMzQkMsRUFBYWpDLEVBQUtrQyxLQUFLLG1CQUkzQixJQUhLRCxJQUNIQSxFQUFhckIsRUFBTXVCLGFBQWEsUUFBVSxVQUV4Q3ZCLEdBQzRCLFlBQTlCQSxFQUFNdUIsYUFBYSxTQUNXLFFBQTlCdkIsRUFBTXVCLGFBQWEsUUFFbkIsV0FEQWhCLFNBQVFDLE1BQU0sbUNBR2hCdkIsR0FBZWEsUUFBUSxTQUFXRSxFQUFNdUIsYUFBYSxRQUFTdkIsRUFDOUQsSUFBSXdCLEdBQWMsV0FDWnZDLEVBQWVZLFFBQVE0QixRQUFRekIsSUFBVSxFQUMzQ1osRUFBS3NDLFNBQVMsd0JBQTBCTCxHQUV4Q2pDLEVBQUt1QyxZQUFZLHdCQUEwQk4sR0FHL0NHLEtBQ0FOLEVBQU1VLElBQUksaUNBQWtDSiIsImZpbGUiOiJvcmNoZXN0cmEvdGFzay9qcy9yZXF1aXJlZF9maWVsZHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHNlcnZpY2VNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnb3JjaGVzdHJhLnRhc2suc2VydmljZXMnKTtcblxuICAvKipcbiAgICogU2VydmljZSB0byBrZWVwIHRyYWNrIG9mIGFsbCByZXF1aXJlZCBmaWVsZHMgaW4gYSB0YXNrIHZpZXcgYW5kXG4gICAqIHZhbGlkYXRlIHRoZW0gb24gc3VibWl0LlxuICAgKi9cbiAgc2VydmljZU1vZHVsZS5mYWN0b3J5KCdyZXF1aXJlZEZpZWxkcycsIGZ1bmN0aW9uKCRyb290U2NvcGUsIG9yY2hlc3RyYVNlcnZpY2UpIHtcbiAgICB2YXIgcmVxdWlyZWRGaWVsZHMgPSB7XG4gICAgICB2YWxpZGF0b3JzOiB7XG4gICAgICAgICdpbnB1dC1jaGVja2JveCc6IFtcblxuICAgICAgICAgIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNoZWNrZWQ7XG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICAnaW5wdXQtdGV4dCc6IFtcblxuICAgICAgICAgIGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLnZhbHVlICYmIGVsZW0udmFsdWUubGVuZ3RoID4gMDtcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgc2V0dXA6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdXAgdGhlIGJhc2UgZGF0YSBvbiB3aGljaCB0byB2YWxpZGF0ZSBmaWVsZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHt9O1xuICAgICAgICB0aGlzLmludmFsaWQgPSBbXTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgIH0sXG4gICAgICByZXF1aXJlOiBmdW5jdGlvbihmaWVsZFR5cGUsIGZpZWxkKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIGEgZmllbGQgYXMgcmVxdWlyZWQuIEZpZWxkcyBhcmUgSFRNTCBlbGVtZW50cyB0byBiZVxuICAgICAgICAgKiBjaGVja2VkIGJ5IG9uZSBvciBtb3JlIHZhbGlkYXRvcnMgYWNjb3JkaW5nIHRvIHRoZWlyIGZpZWxkXG4gICAgICAgICAqIHR5cGUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5maWVsZHNbZmllbGRUeXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5maWVsZHNbZmllbGRUeXBlXSA9IFtmaWVsZF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5maWVsZHNbZmllbGRUeXBlXS5wdXNoKGZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkYXRlcyByZXF1aXJlZCBmaWVsZHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlZ2lzdGVyZWRcbiAgICAgICAgICogdmFsaWRhdG9ycy5cbiAgICAgICAgICovXG4gICAgICAgIHZhciByZXF1aXJlZEZpZWxkcyA9IHRoaXM7XG4gICAgICAgIHJlcXVpcmVkRmllbGRzLmludmFsaWQgPSBbXTtcblxuICAgICAgICAgLypqc2hpbnQgLVcwODMgKi9cbiAgICAgICAgLy8gSGlkZSBlcnJvciBmb3IgY3JlYXRpbmcgYSBmdW5jdGlvbiBpbiBhIGxvb3BcbiAgICAgICAgZm9yICh2YXIgZmllbGRUeXBlIGluIHJlcXVpcmVkRmllbGRzLmZpZWxkcykge1xuICAgICAgICAgIHZhciB2YWxpZGF0b3JzID0gcmVxdWlyZWRGaWVsZHMudmFsaWRhdG9yc1tmaWVsZFR5cGVdO1xuICAgICAgICAgIGlmICghdmFsaWRhdG9ycykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVmFsaWRhdG9ycyBub3QgZm91bmQgZm9yIGZpZWxkIHR5cGU6JyArIGZpZWxkVHlwZSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGZpZWxkcyA9IHJlcXVpcmVkRmllbGRzLmZpZWxkc1tmaWVsZFR5cGVdO1xuICAgICAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICB2YWxpZGF0b3JzLmZvckVhY2goZnVuY3Rpb24odmFsaWRhdG9yKSB7XG4gICAgICAgICAgICAgIHN1Y2Nlc3MgPSBzdWNjZXNzICYmIHZhbGlkYXRvcihmaWVsZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICByZXF1aXJlZEZpZWxkcy5pbnZhbGlkLnB1c2goZmllbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnb3JjaGVzdHJhOnRhc2s6dmFsaWRhdGVkRmllbGRzJyk7XG4gICAgICAgIHJldHVybiByZXF1aXJlZEZpZWxkcy5pbnZhbGlkLmxlbmd0aCA9PT0gMDtcbiAgICAgIH0sXG4gICAgICByZWdpc3RlclZhbGlkYXRvcjogZnVuY3Rpb24oZmllbGRUeXBlLCB2YWxpZGF0b3IpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgdmFsaWRhdG9yIGZ1bmN0aW9uIHRvIHRoZSBnaXZlbiBmaWVsZCB0eXBlLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHJlcXVpcmVkRmllbGRzID0gdGhpcztcbiAgICAgICAgaWYgKHJlcXVpcmVkRmllbGRzLnZhbGlkYXRvcnNbZmllbGRUeXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmVxdWlyZWRGaWVsZHMudmFsaWRhdG9yc1tmaWVsZFR5cGVdLnB1c2godmFsaWRhdG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXF1aXJlZEZpZWxkcy52YWxpZGF0b3JzW2ZpZWxkVHlwZV0gPSBbdmFsaWRhdG9yXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBvcmNoZXN0cmFTZXJ2aWNlLnNpZ25hbHMucmVnaXN0ZXJTaWduYWwoXG4gICAgICAnc3VibWl0LmJlZm9yZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIXJlcXVpcmVkRmllbGRzLnZhbGlkYXRlKCkpIHtcbiAgICAgICAgICBhbGVydCgnT25lIG9yIG1vcmUgcmVxdWlyZWQgZmllbGRzIGhhdmUgbm90IGJlZW4gZmlsbGVkIG91dC4nKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlcXVpcmVkRmllbGRzO1xuICB9KTtcblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBkaXJlY3RpdmUgdG8gd3JhcCByZXF1aXJlZCBmaWVsZHMgaW4gdGFzayB2aWV3cy5cbiAgICogICAtIFRoZSB3cmFwcGVkIEhUTUwgc2hvdWxkIGNvbnRhaW4gYW4gaW5wdXQgZWxlbWVudCBib3VuZCB3aXRoXG4gICAqICAgICBuZ01vZGVsLlxuICAgKiAgIC0gT3B0aW9uYWxseSBwcm92aWRlIGEgY2xhc3MgdG8gYWRkIHRvIHRoZSBkaXJlY3RpdmUgd3JhcHBlciBvblxuICAgKiAgICAgZXJyb3Igd2l0aCBgZGF0YS1lcnJvci1jbGFzcz1cImVycm9yLWNsYXNzXCJgIG9uIHRoZSBkaXJlY3RpdmVcbiAgICogICAgIGVsZW1lbnQ7IG90aGVyd2lzZSwgYSBkZWZhdWx0IGlzIHByb3ZpZGVkIGZvciB0aGUgaW5wdXQgdHlwZS5cbiAgICovXG4gIGFuZ3VsYXIubW9kdWxlKCdvcmNoZXN0cmEudGFzay5kaXJlY3RpdmVzJylcbiAgICAuZGlyZWN0aXZlKCdvcmNoZXN0cmFSZXF1aXJlZEZpZWxkJywgZnVuY3Rpb24oJGNvbXBpbGUsIHJlcXVpcmVkRmllbGRzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG4gICAgICAgICAgdmFyIGZpZWxkID0gZWxlbS5maW5kKCdpbnB1dCcpWzBdO1xuICAgICAgICAgIHZhciBlcnJvckNsYXNzID0gZWxlbS5hdHRyKCdkYXRhLWVycm9yLWNsYXNzJyk7XG4gICAgICAgICAgaWYgKCFlcnJvckNsYXNzKSB7XG4gICAgICAgICAgICBlcnJvckNsYXNzID0gZmllbGQuZ2V0QXR0cmlidXRlKCd0eXBlJykgKyAnLWVycm9yJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGZpZWxkICYmXG4gICAgICAgICAgICBmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSAhPSAnY2hlY2tib3gnICYmXG4gICAgICAgICAgICBmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSAhPSAndGV4dCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Vuc3VwcG9ydGVkIHJlcXVpcmVkIGZpZWxkIHR5cGUuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlcXVpcmVkRmllbGRzLnJlcXVpcmUoJ2lucHV0LScgKyBmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSwgZmllbGQpO1xuICAgICAgICAgIHZhciB0b2dnbGVFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVpcmVkRmllbGRzLmludmFsaWQuaW5kZXhPZihmaWVsZCkgPj0gMCkge1xuICAgICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdyZXF1aXJlZC1maWVsZC1lcnJvciAnICsgZXJyb3JDbGFzcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdyZXF1aXJlZC1maWVsZC1lcnJvciAnICsgZXJyb3JDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0b2dnbGVFcnJvcigpO1xuICAgICAgICAgIHNjb3BlLiRvbignb3JjaGVzdHJhOnRhc2s6dmFsaWRhdGVkRmllbGRzJywgdG9nZ2xlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
