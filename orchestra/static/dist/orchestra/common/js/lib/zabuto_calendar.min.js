if("undefined"==typeof jQuery)throw new Error("jQuery is not loaded");$.fn.zabuto_calendar=function(a){var e=$.extend({},$.fn.zabuto_calendar_defaults(),a),t=$.fn.zabuto_calendar_language(e.language);return e=$.extend({},e,t),this.each(function(){function a(){var a=parseInt(y.data("initYear")),e=parseInt(y.data("initMonth"))-1,r=new Date(a,e,1,0,0,0,0);y.data("initDate",r);var d=y.data("cellBorder")===!0?" table-bordered":"";$tableObj=$('<table class="table'+d+'"></table>'),$tableObj=t(y,$tableObj,r.getFullYear(),r.getMonth()),$legendObj=n(y);var o=$('<div class="zabuto_calendar" id="'+y.attr("id")+'"></div>');o.append($tableObj),o.append($legendObj),y.append(o)}function t(a,e,t,n){var d=new Date(t,n,1,0,0,0,0);return a.data("currDate",d),e.empty(),e=r(a,e,t,n),e=o(a,e),e=i(a,e,t,n),s(a,t,n),e}function n(a){var e=$('<div class="legend" id="'+a.attr("id")+'_legend"></div>'),t=a.data("legendList");return"object"==typeof t&&t.length>0&&$(t).each(function(a,t){if("object"==typeof t&&"type"in t){var n="";switch("label"in t&&(n=t.label),t.type){case"text":if(""!==n){var r="";if("badge"in t){if("undefined"==typeof t.classname)var d="badge-event";else var d=t.classname;r='<span class="badge '+d+'">'+t.badge+"</span> "}e.append('<span class="legend-'+t.type+'">'+r+n+"</span>")}break;case"block":if(""!==n&&(n="<span>"+n+"</span>"),"undefined"==typeof t.classname)var o="event";else var o="event-styled "+t.classname;e.append('<span class="legend-'+t.type+'"><ul class="legend"><li class="'+o+'"></li></u>'+n+"</span>");break;case"list":if("list"in t&&"object"==typeof t.list&&t.list.length>0){var i=$('<ul class="legend"></u>');$(t.list).each(function(a,e){i.append('<li class="'+e+'"></li>')}),e.append(i)}break;case"spacer":e.append('<span class="legend-'+t.type+'"> </span>')}}}),e}function r(a,e,n,r){var d=a.data("navIcons"),o=$('<span><span class="fa fa-chevron-left text-transparent"></span></span>'),i=$('<span><span class="fa fa-chevron-right text-transparent"></span></span>');"object"==typeof d&&("prev"in d&&o.html(d.prev),"next"in d&&i.html(d.next));var l=a.data("showPrevious");"number"!=typeof l&&l!==!1||(l=g(a.data("showPrevious"),!0));var s=$('<div class="calendar-month-navigation"></div>');s.attr("id",a.attr("id")+"_nav-prev"),s.data("navigation","prev"),l!==!1&&(prevMonth=r-1,prevYear=n,-1==prevMonth&&(prevYear-=1,prevMonth=11),s.data("to",{year:prevYear,month:prevMonth+1}),s.append(o),"function"==typeof a.data("actionNavFunction")&&s.click(a.data("actionNavFunction")),s.click(function(n){t(a,e,prevYear,prevMonth)}));var c=a.data("showNext");"number"!=typeof c&&c!==!1||(c=g(a.data("showNext"),!1));var u=$('<div class="calendar-month-navigation"></div>');u.attr("id",a.attr("id")+"_nav-next"),u.data("navigation","next"),c!==!1&&(nextMonth=r+1,nextYear=n,12==nextMonth&&(nextYear+=1,nextMonth=0),u.data("to",{year:nextYear,month:nextMonth+1}),u.append(i),"function"==typeof a.data("actionNavFunction")&&u.click(a.data("actionNavFunction")),u.click(function(n){t(a,e,nextYear,nextMonth)}));var p=a.data("monthLabels"),v=$("<th></th>").append(s),b=$("<th></th>").append(u),f=$("<span>"+p[r]+" "+n+"</span>");f.dblclick(function(){var n=a.data("initDate");t(a,e,n.getFullYear(),n.getMonth())});var h=$('<th colspan="5"></th>');h.append(f);var m=$('<tr class="calendar-month-header"></tr>');return m.append(v,h,b),e.append(m),e}function o(a,e){if(a.data("showDays")===!0){var t=a.data("weekStartsOn"),n=a.data("dowLabels");if(0===t){var r=$.extend([],n),d=new Array(r.pop());n=d.concat(r)}var o=$('<tr class="calendar-dow-header"></tr>');$(n).each(function(a,e){o.append("<th>"+e+"</th>")}),e.append(o)}return e}function i(a,e,t,n){var r=(a.data("ajaxSettings"),f(t,n)),d=b(t,n),o=v(t,n,1),i=v(t,n,d),l=1,s=a.data("weekStartsOn");0===s&&(6==i&&r++,6!=o||0!=i&&1!=i&&5!=i||r--,o++,7==o&&(o=0));for(var c=0;r>c;c++){for(var h=$('<tr class="calendar-dow"></tr>'),m=0;7>m;m++){if(o>m||l>d)h.append("<td></td>");else{var g=a.attr("id")+"_"+p(t,n,l),y=g+"_day",_=$('<div id="'+y+'" class="day" >'+l+"</div>");_.data("day",l),a.data("showToday")===!0&&u(t,n,l)&&_.html('<span class="badge badge-today">'+l+"</span>");var w=$('<td id="'+g+'"></td>');w.append(_),w.data("date",p(t,n,l)),w.data("hasEvent",!1),"function"==typeof a.data("actionFunction")&&(w.addClass("dow-clickable"),w.click(function(){a.data("selectedDate",$(this).data("date"))}),w.click(a.data("actionFunction"))),h.append(w),l++}6==m&&(o=0)}e.append(h)}return e}function l(a,e,t,n){var r=$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'),d=$('<h4 class="modal-title" id="'+a+'_modal_title">'+e+"</h4>"),o=$('<div class="modal-header"></div>');o.append(r),o.append(d);var i=$('<div class="modal-body" id="'+a+'_modal_body">'+t+"</div>"),l=$('<div class="modal-footer" id="'+a+'_modal_footer"></div>');if("undefined"!=typeof n){var s=$("<div>"+n+"</div>");l.append(s)}var c=$('<div class="modal-content"></div>');c.append(o),c.append(i),c.append(l);var u=$('<div class="modal-dialog"></div>');u.append(c);var p=$('<div class="modal fade" id="'+a+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+a+'_modal_title" aria-hidden="true"></div>');return p.append(u),p.data("dateId",a),p.attr("dateId",a),p}function s(a,e,t){var n=a.data("ajaxSettings");if(a.data("events",!1),n===!1)return!0;if("object"!=typeof n||"undefined"==typeof n.url)return alert("Invalid calendar event settings"),!1;var r={year:e,month:t+1};$.ajax({type:"GET",url:n.url,data:r,dataType:"json"}).done(function(e){var t=[];$.each(e,function(a,n){t.push(e[a])}),a.data("events",t),c(a)})}function c(a){var e=a.data("ajaxSettings"),t=a.data("events");t!==!1&&$(t).each(function(t,n){var r=a.attr("id")+"_"+n.date,d=$("#"+r),o=$("#"+r+"_day");if(d.data("hasEvent",!0),"undefined"!=typeof n.title&&d.attr("title",n.title),"undefined"==typeof n.classname?d.addClass("event"):(d.addClass("event-styled"),o.addClass(n.classname)),"undefined"!=typeof n.badge&&n.badge!==!1){var i=n.badge===!0?"":" badge-"+n.badge,s=o.data("day");o.html('<span class="badge badge-event'+i+'">'+s+"</span>")}if("undefined"!=typeof n.body&&"modal"in e&&e.modal===!0){d.addClass("event-clickable");var c=l(r,n.title,n.body,n.footer);$("body").append(c),$("#"+r).click(function(){$("#"+r+"_modal").modal()})}})}function u(a,e,t){var n=new Date,r=new Date(a,e,t);return r.toDateString()==n.toDateString()}function p(a,e,t){return d=10>t?"0"+t:t,m=e+1,m=m<10?"0"+m:m,a+"-"+m+"-"+d}function v(a,e,t){var n=new Date(a,e,t,0,0,0,0),r=n.getDay();return 0==r?r=6:r--,r}function b(a,e){for(var t=28;h(a,e+1,t+1);)t++;return t}function f(a,e){var t=b(a,e),n=v(a,e,1),r=v(a,e,t),d=t,o=n-r;return o>0&&(d+=o),Math.ceil(d/7)}function h(a,e,t){return e>0&&13>e&&a>0&&32768>a&&t>0&&t<=new Date(a,e,0).getDate()}function g(a,e){a===!1&&(a=0);var t,n=y.data("currDate"),r=y.data("initDate");if(t=12*(r.getFullYear()-n.getFullYear()),t-=n.getMonth()+1,t+=r.getMonth(),e===!0){if(t<parseInt(a)-1)return!0}else if(t>=0-parseInt(a))return!0;return!1}var y=$(this);y.attr("id","zabuto_calendar_"+Math.floor(99999*Math.random()).toString(36)),y.data("initYear",e.year),y.data("initMonth",e.month),y.data("monthLabels",e.month_labels),y.data("weekStartsOn",e.weekstartson),y.data("navIcons",e.nav_icon),y.data("dowLabels",e.dow_labels),y.data("showToday",e.today),y.data("showDays",e.show_days),y.data("showPrevious",e.show_previous),y.data("showNext",e.show_next),y.data("cellBorder",e.cell_border),y.data("ajaxSettings",e.ajax),y.data("legendList",e.legend),y.data("actionFunction",e.action),y.data("actionNavFunction",e.action_nav),a()}),this},$.fn.zabuto_calendar_defaults=function(){var a=new Date,e=a.getFullYear(),t=a.getMonth()+1,n={language:!1,year:e,month:t,show_previous:!0,show_next:!0,cell_border:!1,today:!1,show_days:!0,weekstartson:1,nav_icon:!1,ajax:!1,legend:!1,action:!1,action_nav:!1};return n},$.fn.zabuto_calendar_language=function(a){switch("undefined"!=typeof a&&a!==!1||(a="en"),a.toLowerCase()){case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]}}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9jb21tb24vanMvbGliL3phYnV0b19jYWxlbmRhci5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCJFcnJvciIsIiQiLCJmbiIsInphYnV0b19jYWxlbmRhciIsIm9wdGlvbnMiLCJvcHRzIiwiZXh0ZW5kIiwiemFidXRvX2NhbGVuZGFyX2RlZmF1bHRzIiwibGFuZ3VhZ2VTZXR0aW5ncyIsInphYnV0b19jYWxlbmRhcl9sYW5ndWFnZSIsImxhbmd1YWdlIiwidGhpcyIsImVhY2giLCJkcmF3Q2FsZW5kYXIiLCJkYXRlSW5pdFllYXIiLCJwYXJzZUludCIsIiRjYWxlbmRhckVsZW1lbnQiLCJkYXRhIiwiZGF0ZUluaXRNb250aCIsImRhdGVJbml0T2JqIiwiRGF0ZSIsInRhYmxlQ2xhc3NIdG1sIiwiJHRhYmxlT2JqIiwiZHJhd1RhYmxlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsIiRsZWdlbmRPYmoiLCJkcmF3TGVnZW5kIiwiJGNvbnRhaW5lckh0bWwiLCJhdHRyIiwiYXBwZW5kIiwieWVhciIsIm1vbnRoIiwiZGF0ZUN1cnJPYmoiLCJlbXB0eSIsImFwcGVuZE1vbnRoSGVhZGVyIiwiYXBwZW5kRGF5T2ZXZWVrSGVhZGVyIiwiYXBwZW5kRGF5c09mTW9udGgiLCJjaGVja0V2ZW50cyIsImxlZ2VuZCIsImxlbmd0aCIsImluZGV4IiwiaXRlbSIsIml0ZW1MYWJlbCIsImxhYmVsIiwidHlwZSIsIml0ZW1CYWRnZSIsImJhZGdlQ2xhc3NOYW1lIiwiY2xhc3NuYW1lIiwiYmFkZ2UiLCJsaXN0Q2xhc3NOYW1lIiwibGlzdCIsIiRsZWdlbmRVbCIsImxpc3RJbmRleCIsIm5hdkljb25zIiwiJHByZXZNb250aE5hdkljb24iLCIkbmV4dE1vbnRoTmF2SWNvbiIsImh0bWwiLCJwcmV2IiwibmV4dCIsInByZXZJc1ZhbGlkIiwiY2hlY2tNb250aExpbWl0IiwiJHByZXZNb250aE5hdiIsInByZXZNb250aCIsInByZXZZZWFyIiwiY2xpY2siLCJlIiwibmV4dElzVmFsaWQiLCIkbmV4dE1vbnRoTmF2IiwibmV4dE1vbnRoIiwibmV4dFllYXIiLCJtb250aExhYmVscyIsIiRwcmV2TW9udGhDZWxsIiwiJG5leHRNb250aENlbGwiLCIkY3Vyck1vbnRoTGFiZWwiLCJkYmxjbGljayIsIiRjdXJyTW9udGhDZWxsIiwiJG1vbnRoSGVhZGVyUm93Iiwid2Vla1N0YXJ0c09uIiwiZG93TGFiZWxzIiwiZG93RnVsbCIsInN1bkFycmF5IiwiQXJyYXkiLCJwb3AiLCJjb25jYXQiLCIkZG93SGVhZGVyUm93IiwidmFsdWUiLCJ3ZWVrc0luTW9udGgiLCJjYWxjV2Vla3NJbk1vbnRoIiwibGFzdERheWluTW9udGgiLCJjYWxjTGFzdERheUluTW9udGgiLCJmaXJzdERvdyIsImNhbGNEYXlPZldlZWsiLCJsYXN0RG93IiwiY3VyckRheU9mTW9udGgiLCJ3ayIsIiRkb3dSb3ciLCJkb3ciLCJkYXRlSWQiLCJkYXRlQXNTdHJpbmciLCJkYXlJZCIsIiRkYXlFbGVtZW50IiwiaXNUb2RheSIsIiRkb3dFbGVtZW50IiwiYWRkQ2xhc3MiLCJjcmVhdGVNb2RhbCIsImlkIiwidGl0bGUiLCJib2R5IiwiZm9vdGVyIiwiJG1vZGFsSGVhZGVyQnV0dG9uIiwiJG1vZGFsSGVhZGVyVGl0bGUiLCIkbW9kYWxIZWFkZXIiLCIkbW9kYWxCb2R5IiwiJG1vZGFsRm9vdGVyIiwiJG1vZGFsRm9vdGVyQWRkT24iLCIkbW9kYWxDb250ZW50IiwiJG1vZGFsRGlhbG9nIiwiJG1vZGFsRmFkZSIsImFqYXhTZXR0aW5ncyIsImFsZXJ0IiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwiZG9uZSIsInJlc3BvbnNlIiwiZXZlbnRzIiwiayIsInYiLCJwdXNoIiwiZHJhd0V2ZW50cyIsImRhdGUiLCJiYWRnZUNsYXNzIiwiZGF5TGFiZWwiLCJtb2RhbCIsIiRtb2RhbEVsZW1lbnQiLCJkYXkiLCJ0b2RheU9iaiIsImRhdGVPYmoiLCJ0b0RhdGVTdHJpbmciLCJkIiwibSIsImdldERheSIsImNoZWNrVmFsaWREYXRlIiwiZGF5c0luTW9udGgiLCJkYXlzIiwiY29ycmVjdCIsIk1hdGgiLCJjZWlsIiwieSIsImdldERhdGUiLCJjb3VudCIsImludmVydCIsIm1vbnRocyIsImQxIiwiZDIiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwibW9udGhfbGFiZWxzIiwid2Vla3N0YXJ0c29uIiwibmF2X2ljb24iLCJkb3dfbGFiZWxzIiwidG9kYXkiLCJzaG93X2RheXMiLCJzaG93X3ByZXZpb3VzIiwic2hvd19uZXh0IiwiY2VsbF9ib3JkZXIiLCJhY3Rpb24iLCJhY3Rpb25fbmF2Iiwibm93Iiwic2V0dGluZ3MiLCJsYW5nIiwidG9Mb3dlckNhc2UiXSwibWFwcGluZ3MiOiJBQVFBLEdBQXFCLG1CQUFWQSxRQUNQLEtBQU0sSUFBSUMsT0FBTSx1QkFTcEJDLEdBQUVDLEdBQUdDLGdCQUFrQixTQUFVQyxHQUM3QixHQUFJQyxHQUFPSixFQUFFSyxVQUFXTCxFQUFFQyxHQUFHSywyQkFBNEJILEdBQ3JESSxFQUFtQlAsRUFBRUMsR0FBR08seUJBQXlCSixFQUFLSyxTQTRkMUQsT0EzZEFMLEdBQU9KLEVBQUVLLFVBQVdELEVBQU1HLEdBRTFCRyxLQUFLQyxLQUFLLFdBc0JOLFFBQVNDLEtBQ0wsR0FBSUMsR0FBZUMsU0FBU0MsRUFBaUJDLEtBQUssYUFDOUNDLEVBQWdCSCxTQUFTQyxFQUFpQkMsS0FBSyxjQUFnQixFQUMvREUsRUFBYyxHQUFJQyxNQUFLTixFQUFjSSxFQUFlLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFDcEVGLEdBQWlCQyxLQUFLLFdBQVlFLEVBRWxDLElBQUlFLEdBQWtCTCxFQUFpQkMsS0FBSyxpQkFBa0IsRUFBUSxrQkFBb0IsRUFFMUZLLFdBQVlyQixFQUFFLHNCQUF3Qm9CLEVBQWlCLGNBQ3ZEQyxVQUFZQyxFQUFVUCxFQUFrQk0sVUFBV0gsRUFBWUssY0FBZUwsRUFBWU0sWUFFMUZDLFdBQWFDLEVBQVdYLEVBRXhCLElBQUlZLEdBQWlCM0IsRUFBRSxvQ0FBc0NlLEVBQWlC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UUFBUyxRQUFTLE1BQU8sT0FBUSxPQUFRLFdBQVksWUFBYSxVQUFXLFdBQVksWUFDL0hHLFlBQWEsS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLEtBQU0iLCJmaWxlIjoib3JjaGVzdHJhL2NvbW1vbi9qcy9saWIvemFidXRvX2NhbGVuZGFyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogWmFidXRvIENhbGVuZGFyXG4gKlxuICogRGVwZW5kZW5jaWVzXG4gKiAtIGpRdWVyeSAoMi4wLjMpXG4gKiAtIFR3aXR0ZXIgQm9vdHN0cmFwICgzLjAuMilcbiAqL1xuXG5pZiAodHlwZW9mIGpRdWVyeSA9PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcignalF1ZXJ5IGlzIG5vdCBsb2FkZWQnKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgY2FsZW5kYXJcbiAqXG4gKiBAcGFyYW0gb3B0aW9uc1xuICogQHJldHVybnMgeyp9XG4gKi9cbiQuZm4uemFidXRvX2NhbGVuZGFyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgb3B0cyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnphYnV0b19jYWxlbmRhcl9kZWZhdWx0cygpLCBvcHRpb25zKTtcbiAgICB2YXIgbGFuZ3VhZ2VTZXR0aW5ncyA9ICQuZm4uemFidXRvX2NhbGVuZGFyX2xhbmd1YWdlKG9wdHMubGFuZ3VhZ2UpO1xuICAgIG9wdHMgPSAkLmV4dGVuZCh7fSwgb3B0cywgbGFuZ3VhZ2VTZXR0aW5ncyk7XG5cbiAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGNhbGVuZGFyRWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuYXR0cignaWQnLCBcInphYnV0b19jYWxlbmRhcl9cIiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5OTk5KS50b1N0cmluZygzNikpO1xuXG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnaW5pdFllYXInLCBvcHRzLnllYXIpO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2luaXRNb250aCcsIG9wdHMubW9udGgpO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ21vbnRoTGFiZWxzJywgb3B0cy5tb250aF9sYWJlbHMpO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ3dlZWtTdGFydHNPbicsIG9wdHMud2Vla3N0YXJ0c29uKTtcbiAgICAgICAgJGNhbGVuZGFyRWxlbWVudC5kYXRhKCduYXZJY29ucycsIG9wdHMubmF2X2ljb24pO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2Rvd0xhYmVscycsIG9wdHMuZG93X2xhYmVscyk7XG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd1RvZGF5Jywgb3B0cy50b2RheSk7XG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd0RheXMnLCBvcHRzLnNob3dfZGF5cyk7XG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd1ByZXZpb3VzJywgb3B0cy5zaG93X3ByZXZpb3VzKTtcbiAgICAgICAgJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdzaG93TmV4dCcsIG9wdHMuc2hvd19uZXh0KTtcbiAgICAgICAgJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdjZWxsQm9yZGVyJywgb3B0cy5jZWxsX2JvcmRlcik7XG4gICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnYWpheFNldHRpbmdzJywgb3B0cy5hamF4KTtcbiAgICAgICAgJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdsZWdlbmRMaXN0Jywgb3B0cy5sZWdlbmQpO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2FjdGlvbkZ1bmN0aW9uJywgb3B0cy5hY3Rpb24pO1xuICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2FjdGlvbk5hdkZ1bmN0aW9uJywgb3B0cy5hY3Rpb25fbmF2KTtcblxuICAgICAgICBkcmF3Q2FsZW5kYXIoKTtcblxuICAgICAgICBmdW5jdGlvbiBkcmF3Q2FsZW5kYXIoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZUluaXRZZWFyID0gcGFyc2VJbnQoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdpbml0WWVhcicpKTtcbiAgICAgICAgICAgIHZhciBkYXRlSW5pdE1vbnRoID0gcGFyc2VJbnQoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdpbml0TW9udGgnKSkgLSAxO1xuICAgICAgICAgICAgdmFyIGRhdGVJbml0T2JqID0gbmV3IERhdGUoZGF0ZUluaXRZZWFyLCBkYXRlSW5pdE1vbnRoLCAxLCAwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnaW5pdERhdGUnLCBkYXRlSW5pdE9iaik7XG5cbiAgICAgICAgICAgIHZhciB0YWJsZUNsYXNzSHRtbCA9ICgkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2NlbGxCb3JkZXInKSA9PT0gdHJ1ZSkgPyAnIHRhYmxlLWJvcmRlcmVkJyA6ICcnO1xuXG4gICAgICAgICAgICAkdGFibGVPYmogPSAkKCc8dGFibGUgY2xhc3M9XCJ0YWJsZScgKyB0YWJsZUNsYXNzSHRtbCArICdcIj48L3RhYmxlPicpO1xuICAgICAgICAgICAgJHRhYmxlT2JqID0gZHJhd1RhYmxlKCRjYWxlbmRhckVsZW1lbnQsICR0YWJsZU9iaiwgZGF0ZUluaXRPYmouZ2V0RnVsbFllYXIoKSwgZGF0ZUluaXRPYmouZ2V0TW9udGgoKSk7XG5cbiAgICAgICAgICAgICRsZWdlbmRPYmogPSBkcmF3TGVnZW5kKCRjYWxlbmRhckVsZW1lbnQpO1xuXG4gICAgICAgICAgICB2YXIgJGNvbnRhaW5lckh0bWwgPSAkKCc8ZGl2IGNsYXNzPVwiemFidXRvX2NhbGVuZGFyXCIgaWQ9XCInICsgJGNhbGVuZGFyRWxlbWVudC5hdHRyKCdpZCcpICsgJ1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgJGNvbnRhaW5lckh0bWwuYXBwZW5kKCR0YWJsZU9iaik7XG4gICAgICAgICAgICAkY29udGFpbmVySHRtbC5hcHBlbmQoJGxlZ2VuZE9iaik7XG5cbiAgICAgICAgICAgICRjYWxlbmRhckVsZW1lbnQuYXBwZW5kKCRjb250YWluZXJIdG1sKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRyYXdUYWJsZSgkY2FsZW5kYXJFbGVtZW50LCAkdGFibGVPYmosIHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICB2YXIgZGF0ZUN1cnJPYmogPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSwgMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2N1cnJEYXRlJywgZGF0ZUN1cnJPYmopO1xuXG4gICAgICAgICAgICAkdGFibGVPYmouZW1wdHkoKTtcbiAgICAgICAgICAgICR0YWJsZU9iaiA9IGFwcGVuZE1vbnRoSGVhZGVyKCRjYWxlbmRhckVsZW1lbnQsICR0YWJsZU9iaiwgeWVhciwgbW9udGgpO1xuICAgICAgICAgICAgJHRhYmxlT2JqID0gYXBwZW5kRGF5T2ZXZWVrSGVhZGVyKCRjYWxlbmRhckVsZW1lbnQsICR0YWJsZU9iaik7XG4gICAgICAgICAgICAkdGFibGVPYmogPSBhcHBlbmREYXlzT2ZNb250aCgkY2FsZW5kYXJFbGVtZW50LCAkdGFibGVPYmosIHllYXIsIG1vbnRoKTtcbiAgICAgICAgICAgIGNoZWNrRXZlbnRzKCRjYWxlbmRhckVsZW1lbnQsIHllYXIsIG1vbnRoKTtcbiAgICAgICAgICAgIHJldHVybiAkdGFibGVPYmo7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3TGVnZW5kKCRjYWxlbmRhckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciAkbGVnZW5kT2JqID0gJCgnPGRpdiBjbGFzcz1cImxlZ2VuZFwiIGlkPVwiJyArICRjYWxlbmRhckVsZW1lbnQuYXR0cignaWQnKSArICdfbGVnZW5kXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB2YXIgbGVnZW5kID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdsZWdlbmRMaXN0Jyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKGxlZ2VuZCkgPT0gJ29iamVjdCcgJiYgbGVnZW5kLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKGxlZ2VuZCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihpdGVtKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCd0eXBlJyBpbiBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1MYWJlbCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnbGFiZWwnIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUxhYmVsID0gaXRlbS5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtTGFiZWwgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1CYWRnZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnYmFkZ2UnIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihpdGVtLmNsYXNzbmFtZSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmFkZ2VDbGFzc05hbWUgPSAnYmFkZ2UtZXZlbnQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhZGdlQ2xhc3NOYW1lID0gaXRlbS5jbGFzc25hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUJhZGdlID0gJzxzcGFuIGNsYXNzPVwiYmFkZ2UgJyArIGJhZGdlQ2xhc3NOYW1lICsgJ1wiPicgKyBpdGVtLmJhZGdlICsgJzwvc3Bhbj4gJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxlZ2VuZE9iai5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibGVnZW5kLScgKyBpdGVtLnR5cGUgKyAnXCI+JyArIGl0ZW1CYWRnZSArIGl0ZW1MYWJlbCArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYmxvY2snOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1MYWJlbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtTGFiZWwgPSAnPHNwYW4+JyArIGl0ZW1MYWJlbCArICc8L3NwYW4+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoaXRlbS5jbGFzc25hbWUpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0Q2xhc3NOYW1lID0gJ2V2ZW50JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RDbGFzc05hbWUgPSAnZXZlbnQtc3R5bGVkICcgKyBpdGVtLmNsYXNzbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsZWdlbmRPYmouYXBwZW5kKCc8c3BhbiBjbGFzcz1cImxlZ2VuZC0nICsgaXRlbS50eXBlICsgJ1wiPjx1bCBjbGFzcz1cImxlZ2VuZFwiPjxsaSBjbGFzcz1cIicgKyBsaXN0Q2xhc3NOYW1lICsgJ1wiPjwvbGk+PC91PicgKyBpdGVtTGFiZWwgKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpc3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdsaXN0JyBpbiBpdGVtICYmIHR5cGVvZihpdGVtLmxpc3QpID09ICdvYmplY3QnICYmIGl0ZW0ubGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRsZWdlbmRVbCA9ICQoJzx1bCBjbGFzcz1cImxlZ2VuZFwiPjwvdT4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGl0ZW0ubGlzdCkuZWFjaChmdW5jdGlvbiAobGlzdEluZGV4LCBsaXN0Q2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsZWdlbmRVbC5hcHBlbmQoJzxsaSBjbGFzcz1cIicgKyBsaXN0Q2xhc3NOYW1lICsgJ1wiPjwvbGk+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxlZ2VuZE9iai5hcHBlbmQoJGxlZ2VuZFVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzcGFjZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxlZ2VuZE9iai5hcHBlbmQoJzxzcGFuIGNsYXNzPVwibGVnZW5kLScgKyBpdGVtLnR5cGUgKyAnXCI+IDwvc3Bhbj4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAkbGVnZW5kT2JqO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kTW9udGhIZWFkZXIoJGNhbGVuZGFyRWxlbWVudCwgJHRhYmxlT2JqLCB5ZWFyLCBtb250aCkge1xuICAgICAgICAgICAgdmFyIG5hdkljb25zID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCduYXZJY29ucycpO1xuICAgICAgICAgICAgdmFyICRwcmV2TW9udGhOYXZJY29uID0gJCgnPHNwYW4+PHNwYW4gY2xhc3M9XCJmYSBmYS1jaGV2cm9uLWxlZnQgdGV4dC10cmFuc3BhcmVudFwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgICAgICB2YXIgJG5leHRNb250aE5hdkljb24gPSAkKCc8c3Bhbj48c3BhbiBjbGFzcz1cImZhIGZhLWNoZXZyb24tcmlnaHQgdGV4dC10cmFuc3BhcmVudFwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKG5hdkljb25zKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoJ3ByZXYnIGluIG5hdkljb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICRwcmV2TW9udGhOYXZJY29uLmh0bWwobmF2SWNvbnMucHJldik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgnbmV4dCcgaW4gbmF2SWNvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgJG5leHRNb250aE5hdkljb24uaHRtbChuYXZJY29ucy5uZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcmV2SXNWYWxpZCA9ICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd1ByZXZpb3VzJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHByZXZJc1ZhbGlkKSA9PT0gJ251bWJlcicgfHwgcHJldklzVmFsaWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcHJldklzVmFsaWQgPSBjaGVja01vbnRoTGltaXQoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdzaG93UHJldmlvdXMnKSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciAkcHJldk1vbnRoTmF2ID0gJCgnPGRpdiBjbGFzcz1cImNhbGVuZGFyLW1vbnRoLW5hdmlnYXRpb25cIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICRwcmV2TW9udGhOYXYuYXR0cignaWQnLCAkY2FsZW5kYXJFbGVtZW50LmF0dHIoJ2lkJykgKyAnX25hdi1wcmV2Jyk7XG4gICAgICAgICAgICAkcHJldk1vbnRoTmF2LmRhdGEoJ25hdmlnYXRpb24nLCAncHJldicpO1xuICAgICAgICAgICAgaWYgKHByZXZJc1ZhbGlkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHByZXZNb250aCA9IChtb250aCAtIDEpO1xuICAgICAgICAgICAgICAgIHByZXZZZWFyID0geWVhcjtcbiAgICAgICAgICAgICAgICBpZiAocHJldk1vbnRoID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZZZWFyID0gKHByZXZZZWFyIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHByZXZNb250aCA9IDExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkcHJldk1vbnRoTmF2LmRhdGEoJ3RvJywge3llYXI6IHByZXZZZWFyLCBtb250aDogKHByZXZNb250aCArIDEpfSk7XG4gICAgICAgICAgICAgICAgJHByZXZNb250aE5hdi5hcHBlbmQoJHByZXZNb250aE5hdkljb24pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdhY3Rpb25OYXZGdW5jdGlvbicpKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAkcHJldk1vbnRoTmF2LmNsaWNrKCRjYWxlbmRhckVsZW1lbnQuZGF0YSgnYWN0aW9uTmF2RnVuY3Rpb24nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRwcmV2TW9udGhOYXYuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhd1RhYmxlKCRjYWxlbmRhckVsZW1lbnQsICR0YWJsZU9iaiwgcHJldlllYXIsIHByZXZNb250aCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBuZXh0SXNWYWxpZCA9ICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd05leHQnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YobmV4dElzVmFsaWQpID09PSAnbnVtYmVyJyB8fCBuZXh0SXNWYWxpZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBuZXh0SXNWYWxpZCA9IGNoZWNrTW9udGhMaW1pdCgkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ3Nob3dOZXh0JyksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyICRuZXh0TW9udGhOYXYgPSAkKCc8ZGl2IGNsYXNzPVwiY2FsZW5kYXItbW9udGgtbmF2aWdhdGlvblwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJG5leHRNb250aE5hdi5hdHRyKCdpZCcsICRjYWxlbmRhckVsZW1lbnQuYXR0cignaWQnKSArICdfbmF2LW5leHQnKTtcbiAgICAgICAgICAgICRuZXh0TW9udGhOYXYuZGF0YSgnbmF2aWdhdGlvbicsICduZXh0Jyk7XG4gICAgICAgICAgICBpZiAobmV4dElzVmFsaWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbmV4dE1vbnRoID0gKG1vbnRoICsgMSk7XG4gICAgICAgICAgICAgICAgbmV4dFllYXIgPSB5ZWFyO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0TW9udGggPT0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFllYXIgPSAobmV4dFllYXIgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dE1vbnRoID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJG5leHRNb250aE5hdi5kYXRhKCd0bycsIHt5ZWFyOiBuZXh0WWVhciwgbW9udGg6IChuZXh0TW9udGggKyAxKX0pO1xuICAgICAgICAgICAgICAgICRuZXh0TW9udGhOYXYuYXBwZW5kKCRuZXh0TW9udGhOYXZJY29uKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKCRjYWxlbmRhckVsZW1lbnQuZGF0YSgnYWN0aW9uTmF2RnVuY3Rpb24nKSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgJG5leHRNb250aE5hdi5jbGljaygkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2FjdGlvbk5hdkZ1bmN0aW9uJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkbmV4dE1vbnRoTmF2LmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdUYWJsZSgkY2FsZW5kYXJFbGVtZW50LCAkdGFibGVPYmosIG5leHRZZWFyLCBuZXh0TW9udGgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbW9udGhMYWJlbHMgPSAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ21vbnRoTGFiZWxzJyk7XG5cbiAgICAgICAgICAgIHZhciAkcHJldk1vbnRoQ2VsbCA9ICQoJzx0aD48L3RoPicpLmFwcGVuZCgkcHJldk1vbnRoTmF2KTtcbiAgICAgICAgICAgIHZhciAkbmV4dE1vbnRoQ2VsbCA9ICQoJzx0aD48L3RoPicpLmFwcGVuZCgkbmV4dE1vbnRoTmF2KTtcblxuICAgICAgICAgICAgdmFyICRjdXJyTW9udGhMYWJlbCA9ICQoJzxzcGFuPicgKyBtb250aExhYmVsc1ttb250aF0gKyAnICcgKyB5ZWFyICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgICAgICRjdXJyTW9udGhMYWJlbC5kYmxjbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVJbml0T2JqID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdpbml0RGF0ZScpO1xuICAgICAgICAgICAgICAgIGRyYXdUYWJsZSgkY2FsZW5kYXJFbGVtZW50LCAkdGFibGVPYmosIGRhdGVJbml0T2JqLmdldEZ1bGxZZWFyKCksIGRhdGVJbml0T2JqLmdldE1vbnRoKCkpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciAkY3Vyck1vbnRoQ2VsbCA9ICQoJzx0aCBjb2xzcGFuPVwiNVwiPjwvdGg+Jyk7XG4gICAgICAgICAgICAkY3Vyck1vbnRoQ2VsbC5hcHBlbmQoJGN1cnJNb250aExhYmVsKTtcblxuICAgICAgICAgICAgdmFyICRtb250aEhlYWRlclJvdyA9ICQoJzx0ciBjbGFzcz1cImNhbGVuZGFyLW1vbnRoLWhlYWRlclwiPjwvdHI+Jyk7XG4gICAgICAgICAgICAkbW9udGhIZWFkZXJSb3cuYXBwZW5kKCRwcmV2TW9udGhDZWxsLCAkY3Vyck1vbnRoQ2VsbCwgJG5leHRNb250aENlbGwpO1xuXG4gICAgICAgICAgICAkdGFibGVPYmouYXBwZW5kKCRtb250aEhlYWRlclJvdyk7XG4gICAgICAgICAgICByZXR1cm4gJHRhYmxlT2JqO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYXBwZW5kRGF5T2ZXZWVrSGVhZGVyKCRjYWxlbmRhckVsZW1lbnQsICR0YWJsZU9iaikge1xuICAgICAgICAgICAgaWYgKCRjYWxlbmRhckVsZW1lbnQuZGF0YSgnc2hvd0RheXMnKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciB3ZWVrU3RhcnRzT24gPSAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ3dlZWtTdGFydHNPbicpO1xuICAgICAgICAgICAgICAgIHZhciBkb3dMYWJlbHMgPSAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2Rvd0xhYmVscycpO1xuICAgICAgICAgICAgICAgIGlmICh3ZWVrU3RhcnRzT24gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvd0Z1bGwgPSAkLmV4dGVuZChbXSwgZG93TGFiZWxzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1bkFycmF5ID0gbmV3IEFycmF5KGRvd0Z1bGwucG9wKCkpO1xuICAgICAgICAgICAgICAgICAgICBkb3dMYWJlbHMgPSBzdW5BcnJheS5jb25jYXQoZG93RnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyICRkb3dIZWFkZXJSb3cgPSAkKCc8dHIgY2xhc3M9XCJjYWxlbmRhci1kb3ctaGVhZGVyXCI+PC90cj4nKTtcbiAgICAgICAgICAgICAgICAkKGRvd0xhYmVscykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICRkb3dIZWFkZXJSb3cuYXBwZW5kKCc8dGg+JyArIHZhbHVlICsgJzwvdGg+Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHRhYmxlT2JqLmFwcGVuZCgkZG93SGVhZGVyUm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAkdGFibGVPYmo7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhcHBlbmREYXlzT2ZNb250aCgkY2FsZW5kYXJFbGVtZW50LCAkdGFibGVPYmosIHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICB2YXIgYWpheFNldHRpbmdzID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdhamF4U2V0dGluZ3MnKTtcbiAgICAgICAgICAgIHZhciB3ZWVrc0luTW9udGggPSBjYWxjV2Vla3NJbk1vbnRoKHllYXIsIG1vbnRoKTtcbiAgICAgICAgICAgIHZhciBsYXN0RGF5aW5Nb250aCA9IGNhbGNMYXN0RGF5SW5Nb250aCh5ZWFyLCBtb250aCk7XG4gICAgICAgICAgICB2YXIgZmlyc3REb3cgPSBjYWxjRGF5T2ZXZWVrKHllYXIsIG1vbnRoLCAxKTtcbiAgICAgICAgICAgIHZhciBsYXN0RG93ID0gY2FsY0RheU9mV2Vlayh5ZWFyLCBtb250aCwgbGFzdERheWluTW9udGgpO1xuICAgICAgICAgICAgdmFyIGN1cnJEYXlPZk1vbnRoID0gMTtcblxuICAgICAgICAgICAgdmFyIHdlZWtTdGFydHNPbiA9ICRjYWxlbmRhckVsZW1lbnQuZGF0YSgnd2Vla1N0YXJ0c09uJyk7XG4gICAgICAgICAgICBpZiAod2Vla1N0YXJ0c09uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3REb3cgPT0gNikge1xuICAgICAgICAgICAgICAgICAgICB3ZWVrc0luTW9udGgrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RG93ID09IDYgJiYgKGxhc3REb3cgPT0gMCB8fCBsYXN0RG93ID09IDEgfHwgbGFzdERvdyA9PSA1KSkge1xuICAgICAgICAgICAgICAgICAgICB3ZWVrc0luTW9udGgtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlyc3REb3crKztcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3REb3cgPT0gNykge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdERvdyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciB3ayA9IDA7IHdrIDwgd2Vla3NJbk1vbnRoOyB3aysrKSB7XG4gICAgICAgICAgICAgICAgdmFyICRkb3dSb3cgPSAkKCc8dHIgY2xhc3M9XCJjYWxlbmRhci1kb3dcIj48L3RyPicpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGRvdyA9IDA7IGRvdyA8IDc7IGRvdysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb3cgPCBmaXJzdERvdyB8fCBjdXJyRGF5T2ZNb250aCA+IGxhc3REYXlpbk1vbnRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZG93Um93LmFwcGVuZCgnPHRkPjwvdGQ+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZUlkID0gJGNhbGVuZGFyRWxlbWVudC5hdHRyKCdpZCcpICsgJ18nICsgZGF0ZUFzU3RyaW5nKHllYXIsIG1vbnRoLCBjdXJyRGF5T2ZNb250aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF5SWQgPSBkYXRlSWQgKyAnX2RheSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkZGF5RWxlbWVudCA9ICQoJzxkaXYgaWQ9XCInICsgZGF5SWQgKyAnXCIgY2xhc3M9XCJkYXlcIiA+JyArIGN1cnJEYXlPZk1vbnRoICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRheUVsZW1lbnQuZGF0YSgnZGF5JywgY3VyckRheU9mTW9udGgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdzaG93VG9kYXknKSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RvZGF5KHllYXIsIG1vbnRoLCBjdXJyRGF5T2ZNb250aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRheUVsZW1lbnQuaHRtbCgnPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS10b2RheVwiPicgKyBjdXJyRGF5T2ZNb250aCArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGRvd0VsZW1lbnQgPSAkKCc8dGQgaWQ9XCInICsgZGF0ZUlkICsgJ1wiPjwvdGQ+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZG93RWxlbWVudC5hcHBlbmQoJGRheUVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG93RWxlbWVudC5kYXRhKCdkYXRlJywgZGF0ZUFzU3RyaW5nKHllYXIsIG1vbnRoLCBjdXJyRGF5T2ZNb250aCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRvd0VsZW1lbnQuZGF0YSgnaGFzRXZlbnQnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdhY3Rpb25GdW5jdGlvbicpKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkb3dFbGVtZW50LmFkZENsYXNzKCdkb3ctY2xpY2thYmxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvd0VsZW1lbnQuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ3NlbGVjdGVkRGF0ZScsICQodGhpcykuZGF0YSgnZGF0ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZG93RWxlbWVudC5jbGljaygkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2FjdGlvbkZ1bmN0aW9uJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAkZG93Um93LmFwcGVuZCgkZG93RWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJEYXlPZk1vbnRoKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvdyA9PSA2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdERvdyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkdGFibGVPYmouYXBwZW5kKCRkb3dSb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICR0YWJsZU9iajtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIC0tLS0tIE1vZGFsIGZ1bmN0aW9ucyAtLS0tLSAqL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1vZGFsKGlkLCB0aXRsZSwgYm9keSwgZm9vdGVyKSB7XG4gICAgICAgICAgICB2YXIgJG1vZGFsSGVhZGVyQnV0dG9uID0gJCgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvYnV0dG9uPicpO1xuICAgICAgICAgICAgdmFyICRtb2RhbEhlYWRlclRpdGxlID0gJCgnPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIiBpZD1cIicgKyBpZCArICdfbW9kYWxfdGl0bGVcIj4nICsgdGl0bGUgKyAnPC9oND4nKTtcblxuICAgICAgICAgICAgdmFyICRtb2RhbEhlYWRlciA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICRtb2RhbEhlYWRlci5hcHBlbmQoJG1vZGFsSGVhZGVyQnV0dG9uKTtcbiAgICAgICAgICAgICRtb2RhbEhlYWRlci5hcHBlbmQoJG1vZGFsSGVhZGVyVGl0bGUpO1xuXG4gICAgICAgICAgICB2YXIgJG1vZGFsQm9keSA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCIgaWQ9XCInICsgaWQgKyAnX21vZGFsX2JvZHlcIj4nICsgYm9keSArICc8L2Rpdj4nKTtcblxuICAgICAgICAgICAgdmFyICRtb2RhbEZvb3RlciA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIiBpZD1cIicgKyBpZCArICdfbW9kYWxfZm9vdGVyXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKGZvb3RlcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdmFyICRtb2RhbEZvb3RlckFkZE9uID0gJCgnPGRpdj4nICsgZm9vdGVyICsgJzwvZGl2PicpO1xuICAgICAgICAgICAgICAgICRtb2RhbEZvb3Rlci5hcHBlbmQoJG1vZGFsRm9vdGVyQWRkT24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgJG1vZGFsQ29udGVudCA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAkbW9kYWxDb250ZW50LmFwcGVuZCgkbW9kYWxIZWFkZXIpO1xuICAgICAgICAgICAgJG1vZGFsQ29udGVudC5hcHBlbmQoJG1vZGFsQm9keSk7XG4gICAgICAgICAgICAkbW9kYWxDb250ZW50LmFwcGVuZCgkbW9kYWxGb290ZXIpO1xuXG4gICAgICAgICAgICB2YXIgJG1vZGFsRGlhbG9nID0gJCgnPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgJG1vZGFsRGlhbG9nLmFwcGVuZCgkbW9kYWxDb250ZW50KTtcblxuICAgICAgICAgICAgdmFyICRtb2RhbEZhZGUgPSAkKCc8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiJyArIGlkICsgJ19tb2RhbFwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCIgYXJpYS1sYWJlbGxlZGJ5PVwiJyArIGlkICsgJ19tb2RhbF90aXRsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgJG1vZGFsRmFkZS5hcHBlbmQoJG1vZGFsRGlhbG9nKTtcblxuICAgICAgICAgICAgJG1vZGFsRmFkZS5kYXRhKCdkYXRlSWQnLCBpZCk7XG4gICAgICAgICAgICAkbW9kYWxGYWRlLmF0dHIoXCJkYXRlSWRcIiwgaWQpO1xuXG4gICAgICAgICAgICByZXR1cm4gJG1vZGFsRmFkZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIC0tLS0tIEV2ZW50IGZ1bmN0aW9ucyAtLS0tLSAqL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrRXZlbnRzKCRjYWxlbmRhckVsZW1lbnQsIHllYXIsIG1vbnRoKSB7XG4gICAgICAgICAgICB2YXIgYWpheFNldHRpbmdzID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdhamF4U2V0dGluZ3MnKTtcblxuICAgICAgICAgICAgJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdldmVudHMnLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGlmIChhamF4U2V0dGluZ3MgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YoYWpheFNldHRpbmdzKSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YoYWpheFNldHRpbmdzLnVybCkgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBhbGVydCgnSW52YWxpZCBjYWxlbmRhciBldmVudCBzZXR0aW5ncycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHllYXI6IHllYXIsIG1vbnRoOiAobW9udGggKyAxKX07XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBhamF4U2V0dGluZ3MudXJsLFxuICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzcG9uc2UsIGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHMucHVzaChyZXNwb25zZVtrXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2V2ZW50cycsIGV2ZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdFdmVudHMoJGNhbGVuZGFyRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkcmF3RXZlbnRzKCRjYWxlbmRhckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBhamF4U2V0dGluZ3MgPSAkY2FsZW5kYXJFbGVtZW50LmRhdGEoJ2FqYXhTZXR0aW5ncycpO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdldmVudHMnKTtcbiAgICAgICAgICAgIGlmIChldmVudHMgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgJChldmVudHMpLmVhY2goZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSAkY2FsZW5kYXJFbGVtZW50LmF0dHIoJ2lkJykgKyAnXycgKyB2YWx1ZS5kYXRlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGRvd0VsZW1lbnQgPSAkKCcjJyArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRkYXlFbGVtZW50ID0gJCgnIycgKyBpZCArICdfZGF5Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJGRvd0VsZW1lbnQuZGF0YSgnaGFzRXZlbnQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHZhbHVlLnRpdGxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb3dFbGVtZW50LmF0dHIoJ3RpdGxlJywgdmFsdWUudGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZih2YWx1ZS5jbGFzc25hbWUpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRvd0VsZW1lbnQuYWRkQ2xhc3MoJ2V2ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZG93RWxlbWVudC5hZGRDbGFzcygnZXZlbnQtc3R5bGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGF5RWxlbWVudC5hZGRDbGFzcyh2YWx1ZS5jbGFzc25hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZih2YWx1ZS5iYWRnZSkgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlLmJhZGdlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhZGdlQ2xhc3MgPSAodmFsdWUuYmFkZ2UgPT09IHRydWUpID8gJycgOiAnIGJhZGdlLScgKyB2YWx1ZS5iYWRnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXlMYWJlbCA9ICRkYXlFbGVtZW50LmRhdGEoJ2RheScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRheUVsZW1lbnQuaHRtbCgnPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1ldmVudCcgKyBiYWRnZUNsYXNzICsgJ1wiPicgKyBkYXlMYWJlbCArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHZhbHVlLmJvZHkpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCdtb2RhbCcgaW4gYWpheFNldHRpbmdzICYmIChhamF4U2V0dGluZ3MubW9kYWwgPT09IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvd0VsZW1lbnQuYWRkQ2xhc3MoJ2V2ZW50LWNsaWNrYWJsZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRtb2RhbEVsZW1lbnQgPSBjcmVhdGVNb2RhbChpZCwgdmFsdWUudGl0bGUsIHZhbHVlLmJvZHksIHZhbHVlLmZvb3Rlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkbW9kYWxFbGVtZW50KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyMnICsgaWQpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnIycgKyBpZCArICdfbW9kYWwnKS5tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiAtLS0tLSBIZWxwZXIgZnVuY3Rpb25zIC0tLS0tICovXG5cbiAgICAgICAgZnVuY3Rpb24gaXNUb2RheSh5ZWFyLCBtb250aCwgZGF5KSB7XG4gICAgICAgICAgICB2YXIgdG9kYXlPYmogPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdmFyIGRhdGVPYmogPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbiAgICAgICAgICAgIHJldHVybiAoZGF0ZU9iai50b0RhdGVTdHJpbmcoKSA9PSB0b2RheU9iai50b0RhdGVTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBkYXRlQXNTdHJpbmcoeWVhciwgbW9udGgsIGRheSkge1xuICAgICAgICAgICAgZCA9IChkYXkgPCAxMCkgPyAnMCcgKyBkYXkgOiBkYXk7XG4gICAgICAgICAgICBtID0gbW9udGggKyAxO1xuICAgICAgICAgICAgbSA9IChtIDwgMTApID8gJzAnICsgbSA6IG07XG4gICAgICAgICAgICByZXR1cm4geWVhciArICctJyArIG0gKyAnLScgKyBkO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY0RheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSB7XG4gICAgICAgICAgICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXksIDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgdmFyIGRvdyA9IGRhdGVPYmouZ2V0RGF5KCk7XG4gICAgICAgICAgICBpZiAoZG93ID09IDApIHtcbiAgICAgICAgICAgICAgICBkb3cgPSA2O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkb3ctLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb3c7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjYWxjTGFzdERheUluTW9udGgoeWVhciwgbW9udGgpIHtcbiAgICAgICAgICAgIHZhciBkYXkgPSAyODtcbiAgICAgICAgICAgIHdoaWxlIChjaGVja1ZhbGlkRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheSArIDEpKSB7XG4gICAgICAgICAgICAgICAgZGF5Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY1dlZWtzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICAgICAgICAgICAgdmFyIGRheXNJbk1vbnRoID0gY2FsY0xhc3REYXlJbk1vbnRoKHllYXIsIG1vbnRoKTtcbiAgICAgICAgICAgIHZhciBmaXJzdERvdyA9IGNhbGNEYXlPZldlZWsoeWVhciwgbW9udGgsIDEpO1xuICAgICAgICAgICAgdmFyIGxhc3REb3cgPSBjYWxjRGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXlzSW5Nb250aCk7XG4gICAgICAgICAgICB2YXIgZGF5cyA9IGRheXNJbk1vbnRoO1xuICAgICAgICAgICAgdmFyIGNvcnJlY3QgPSAoZmlyc3REb3cgLSBsYXN0RG93KTtcbiAgICAgICAgICAgIGlmIChjb3JyZWN0ID4gMCkge1xuICAgICAgICAgICAgICAgIGRheXMgKz0gY29ycmVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwoZGF5cyAvIDcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tWYWxpZERhdGUoeSwgbSwgZCkge1xuICAgICAgICAgICAgcmV0dXJuIG0gPiAwICYmIG0gPCAxMyAmJiB5ID4gMCAmJiB5IDwgMzI3NjggJiYgZCA+IDAgJiYgZCA8PSAobmV3IERhdGUoeSwgbSwgMCkpLmdldERhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrTW9udGhMaW1pdChjb3VudCwgaW52ZXJ0KSB7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY291bnQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGQxID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdjdXJyRGF0ZScpO1xuICAgICAgICAgICAgdmFyIGQyID0gJGNhbGVuZGFyRWxlbWVudC5kYXRhKCdpbml0RGF0ZScpO1xuXG4gICAgICAgICAgICB2YXIgbW9udGhzO1xuICAgICAgICAgICAgbW9udGhzID0gKGQyLmdldEZ1bGxZZWFyKCkgLSBkMS5nZXRGdWxsWWVhcigpKSAqIDEyO1xuICAgICAgICAgICAgbW9udGhzIC09IGQxLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICAgICAgbW9udGhzICs9IGQyLmdldE1vbnRoKCk7XG5cbiAgICAgICAgICAgIGlmIChpbnZlcnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9udGhzIDwgKHBhcnNlSW50KGNvdW50KSAtIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRocyA+PSAoMCAtIHBhcnNlSW50KGNvdW50KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7IC8vIGVhY2goKVxuXG4gICAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc2V0dGluZ3NcbiAqXG4gKiBAcmV0dXJucyBvYmplY3RcbiAqICAgbGFuZ3VhZ2U6ICAgICAgICAgIHN0cmluZyxcbiAqICAgeWVhcjogICAgICAgICAgICAgIGludGVnZXIsXG4gKiAgIG1vbnRoOiAgICAgICAgICAgICBpbnRlZ2VyLFxuICogICBzaG93X3ByZXZpb3VzOiAgICAgYm9vbGVhbnxpbnRlZ2VyLFxuICogICBzaG93X25leHQ6ICAgICAgICAgYm9vbGVhbnxpbnRlZ2VyLFxuICogICBjZWxsX2JvcmRlcjogICAgICAgYm9vbGVhbixcbiAqICAgdG9kYXk6ICAgICAgICAgICAgIGJvb2xlYW4sXG4gKiAgIHNob3dfZGF5czogICAgICAgICBib29sZWFuLFxuICogICB3ZWVrc3RhcnRzb246ICAgICAgaW50ZWdlciAoMCA9IFN1bmRheSwgMSA9IE1vbmRheSksXG4gKiAgIG5hdl9pY29uOiAgICAgICAgICBvYmplY3Q6IHByZXY6IHN0cmluZywgbmV4dDogc3RyaW5nXG4gKiAgIGFqYXg6ICAgICAgICAgICAgICBvYmplY3Q6IHVybDogc3RyaW5nLCBtb2RhbDogYm9vbGVhbixcbiAqICAgbGVnZW5kOiAgICAgICAgICAgIG9iamVjdCBhcnJheSwgW3t0eXBlOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIGNsYXNzbmFtZTogc3RyaW5nfV1cbiAqICAgYWN0aW9uOiAgICAgICAgICAgIGZ1bmN0aW9uXG4gKiAgIGFjdGlvbl9uYXY6ICAgICAgICBmdW5jdGlvblxuICovXG4kLmZuLnphYnV0b19jYWxlbmRhcl9kZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICB2YXIgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpO1xuICAgIHZhciBtb250aCA9IG5vdy5nZXRNb250aCgpICsgMTtcbiAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgIGxhbmd1YWdlOiBmYWxzZSxcbiAgICAgICAgeWVhcjogeWVhcixcbiAgICAgICAgbW9udGg6IG1vbnRoLFxuICAgICAgICBzaG93X3ByZXZpb3VzOiB0cnVlLFxuICAgICAgICBzaG93X25leHQ6IHRydWUsXG4gICAgICAgIGNlbGxfYm9yZGVyOiBmYWxzZSxcbiAgICAgICAgdG9kYXk6IGZhbHNlLFxuICAgICAgICBzaG93X2RheXM6IHRydWUsXG4gICAgICAgIHdlZWtzdGFydHNvbjogMSxcbiAgICAgICAgbmF2X2ljb246IGZhbHNlLFxuICAgICAgICBhamF4OiBmYWxzZSxcbiAgICAgICAgbGVnZW5kOiBmYWxzZSxcbiAgICAgICAgYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgYWN0aW9uX25hdjogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBzZXR0aW5ncztcbn07XG5cbi8qKlxuICogTGFuZ3VhZ2Ugc2V0dGluZ3NcbiAqXG4gKiBAcGFyYW0gbGFuZ1xuICogQHJldHVybnMge3ttb250aF9sYWJlbHM6IEFycmF5LCBkb3dfbGFiZWxzOiBBcnJheX19XG4gKi9cbiQuZm4uemFidXRvX2NhbGVuZGFyX2xhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmcpIHtcbiAgICBpZiAodHlwZW9mKGxhbmcpID09ICd1bmRlZmluZWQnIHx8IGxhbmcgPT09IGZhbHNlKSB7XG4gICAgICAgIGxhbmcgPSAnZW4nO1xuICAgIH1cblxuICAgIHN3aXRjaCAobGFuZy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ2RlJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9udGhfbGFiZWxzOiBbXCJKYW51YXJcIiwgXCJGZWJydWFyXCIsIFwiTcOkcnpcIiwgXCJBcHJpbFwiLCBcIk1haVwiLCBcIkp1bmlcIiwgXCJKdWxpXCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2t0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGV6ZW1iZXJcIl0sXG4gICAgICAgICAgICAgICAgZG93X2xhYmVsczogW1wiTW9cIiwgXCJEaVwiLCBcIk1pXCIsIFwiRG9cIiwgXCJGclwiLCBcIlNhXCIsIFwiU29cIl1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdlbic6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1vbnRoX2xhYmVsczogW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl0sXG4gICAgICAgICAgICAgICAgZG93X2xhYmVsczogW1wiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCIsIFwiU3VuXCJdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZXMnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtb250aF9sYWJlbHM6IFtcIkVuZXJvXCIsIFwiRmVicmVyb1wiLCBcIk1hcnpvXCIsIFwiQWJyaWxcIiwgXCJNYXlvXCIsIFwiSnVuaW9cIiwgXCJKdWxpb1wiLCBcIkFnb3N0b1wiLCBcIlNlcHRpZW1icmVcIiwgXCJPY3R1YnJlXCIsIFwiTm92aWVtYnJlXCIsIFwiRGljaWVtYnJlXCJdLFxuICAgICAgICAgICAgICAgIGRvd19sYWJlbHM6IFtcIkx1XCIsIFwiTWFcIiwgXCJNaVwiLCBcIkp1XCIsIFwiVmlcIiwgXCJTw6FcIiwgXCJEb1wiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2ZyJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9udGhfbGFiZWxzOiBbXCJKYW52aWVyXCIsIFwiRsOpdnJpZXJcIiwgXCJNYXJzXCIsIFwiQXZyaWxcIiwgXCJNYWlcIiwgXCJKdWluXCIsIFwiSnVpbGxldFwiLCBcIkFvw7t0XCIsIFwiU2VwdGVtYnJlXCIsIFwiT2N0b2JyZVwiLCBcIk5vdmVtYnJlXCIsIFwiRMOpY2VtYnJlXCJdLFxuICAgICAgICAgICAgICAgIGRvd19sYWJlbHM6IFtcIkx1blwiLCBcIk1hclwiLCBcIk1lclwiLCBcIkpldVwiLCBcIlZlblwiLCBcIlNhbVwiLCBcIkRpbVwiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2l0JzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9udGhfbGFiZWxzOiBbXCJHZW5uYWlvXCIsIFwiRmViYnJhaW9cIiwgXCJNYXJ6b1wiLCBcIkFwcmlsZVwiLCBcIk1hZ2dpb1wiLCBcIkdpdWdub1wiLCBcIkx1Z2xpb1wiLCBcIkFnb3N0b1wiLCBcIlNldHRlbWJyZVwiLCBcIk90dG9icmVcIiwgXCJOb3ZlbWJyZVwiLCBcIkRpY2VtYnJlXCJdLFxuICAgICAgICAgICAgICAgIGRvd19sYWJlbHM6IFtcIkx1blwiLCBcIk1hclwiLCBcIk1lclwiLCBcIkdpb1wiLCBcIlZlblwiLCBcIlNhYlwiLCBcIkRvbVwiXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ25sJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbW9udGhfbGFiZWxzOiBbXCJKYW51YXJpXCIsIFwiRmVicnVhcmlcIiwgXCJNYWFydFwiLCBcIkFwcmlsXCIsIFwiTWVpXCIsIFwiSnVuaVwiLCBcIkp1bGlcIiwgXCJBdWd1c3R1c1wiLCBcIlNlcHRlbWJlclwiLCBcIk9rdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdLFxuICAgICAgICAgICAgICAgIGRvd19sYWJlbHM6IFtcIk1hXCIsIFwiRGlcIiwgXCJXb1wiLCBcIkRvXCIsIFwiVnJcIiwgXCJaYVwiLCBcIlpvXCJdXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuXG59O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
