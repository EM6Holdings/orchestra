!function(){"use strict";function t(t,e,n,o){return{restrict:"E",scope:{data:"=",author:"@?",imagePrefix:"@?"},link:function(t,n,i){var a={title:"Update the hero image (This is a sample item! Click on the text to edit or click to the right to expand.)",comments:[{author:"jane",timestamp:new Date(new Date-108e5),text:"The hero image you've chosen doesn't fit well with the color scheme. Try something less washed out?"},{author:"john",timestamp:new Date(new Date-72e5),text:"Sounds good! I swapped it out, what do you think? "},{author:"",text:"This is a sample checklist comment. You can add a new comment for each new round of iteration on your work!"}],checked:!1,expanded:!1,readonly:!0,index:0,order:0};t.data=t.data||{},t.data.items=t.data.items||[a],t.data.deletedItems=t.data.deletedItems||[],t.hideCompleted=!1,o.signals.registerSignal("submit.before",function(){t.data.items.forEach(function(e){e.comments[e.comments.length-1].text&&(e.comments[e.comments.length-1].author=t.author,e.comments[e.comments.length-1].timestamp=Date.now(),e.comments.push({author:"",text:""}))})}),o.signals.registerSignal("submit.error",function(){t.data.items.forEach(function(t){t.comments[t.comments.length-1].text&&(t.comments.pop(),t.comments[t.comments.length-1].author="",t.comments[t.comments.length-1].timestamp=void 0)})}),t.preventAction=!1;var r=n.find("ul.checklist"),s=dragula([r.get(0)],{moves:function(t,e,n){return n.className.indexOf("checklist-item")>=0||n.className.indexOf("item-title-input")>=0&&n.className.indexOf("readonly")>=0||n.className.indexOf("item-title")>=0&&n.className.indexOf("item-title-input")<0},invalid:function(e,n){return t.preventAction}});s.on("drag",function(){t.preventAction=!0,t.$apply()}),s.on("dragend",function(){c(),t.preventAction=!1,t.$apply()});var c=function(){for(var t=n.get(0).querySelectorAll(".checklist-item"),e=0;e<t.length;e++){var o=t[e];m(o.getAttribute("data-key")).order=e}},m=function(e){for(var n,o=t.data.items.length-1;o>=0;o--)if(n=t.data.items[o],n.$$hashKey===e)return n};t.addItem=function(){t.data.items.push({title:"",comments:[{author:t.author,text:""}],checked:!1,expanded:!1,readonly:!0,order:t.data.items.length})},t.removeItem=function(n,o){var i=t.data.items.indexOf(n);o&&!confirm("Are you sure you want to delete this item?")||(t.preventAction=!0,t.data.items.splice(i,1),t.data.deletedItems.push(n),e(function(){c(),t.preventAction=!1},0,!1))},t.editItem=function(e,n){e.readonly&&(n&&n.target.focus(),t.data.items.forEach(function(t){t.readonly=!0})),e.readonly=!e.readonly},t.expandItem=function(e){e.expanded=!e.expanded,t.data.items.forEach(function(t){t.readonly=!0})},t.getCommentTimestamp=function(t){return new Date(t.timestamp).toLocaleString()}},templateUrl:"/static/orchestra/common/components/checklist/partials/checklist.html"}}function e(t,e,n,o){return{restrict:"E",link:function(t,n,o){t.autosizeInput=function(t,e,n,o){function i(t){return t.replace(a,"&nbsp;").replace(r,"&lt;").replace(s,"&gt;")}var a=/\s/g,r=/>/g,s=/</g;o=o||t.value||"";var c=window.getComputedStyle(t),m="font-family:"+c.fontFamily+";font-size:"+c.fontSize;e.style.cssText+=m,e.innerHTML=i(o);var d=window.getComputedStyle(e).width;return"0px"===d&&(d=n),t.style.width=d,d},t.setupAutosizer=function(n){var o=document.createElement("div");o.className="ghost",o.style.cssText="box-sizing:content-box;display:inline-block;height:0;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:nowrap;",document.body.appendChild(o),n.style.boxSizing="content-box";var i=t.autosizeInput(n,o,0,n.getAttribute("placeholder"));n.addEventListener("input",function(){t.autosizeInput(n,o,i)}),e(function(){t.autosizeInput(n,o,i)},0)},t.setupAutosizer(n.find(".item-title input").get(0))},templateUrl:"/static/orchestra/common/components/checklist/partials/checklist-item.html"}}angular.module("orchestra.common.components.directives").directive("orchestraChecklist",["$http","$timeout","$compile","orchestraService",t]),angular.module("orchestra.common.components.directives").directive("orchestraChecklistItem",["$http","$timeout","$compile","orchestraService",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hlc3RyYS9jb21tb24vY29tcG9uZW50cy9jaGVja2xpc3QvanMvZGlyZWN0aXZlcy5qcyJdLCJuYW1lcyI6WyJvcmNoZXN0cmFDaGVja2xpc3QiLCIkaHR0cCIsIiR0aW1lb3V0IiwiJGNvbXBpbGUiLCJvcmNoZXN0cmFTZXJ2aWNlIiwicmVzdHJpY3QiLCJzY29wZSIsImRhdGEiLCJhdXRob3IiLCJpbWFnZVByZWZpeCIsImxpbmsiLCJlbCIsImF0dHIiLCJzYW1wbGVJdGVtIiwidGl0bGUiLCJjb21tZW50cyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0ZXh0IiwiY2hlY2tlZCIsImV4cGFuZGVkIiwicmVhZG9ubHkiLCJpbmRleCIsIm9yZGVyIiwiaXRlbXMiLCJkZWxldGVkSXRlbXMiLCJoaWRlQ29tcGxldGVkIiwic2lnbmFscyIsInJlZ2lzdGVyU2lnbmFsIiwiZm9yRWFjaCIsIml0ZW0iLCJsZW5ndGgiLCJub3ciLCJwdXNoIiwicG9wIiwidW5kZWZpbmVkIiwicHJldmVudEFjdGlvbiIsImNoZWNrbGlzdENvbnRhaW5lciIsImZpbmQiLCJkcmFrZSIsImRyYWd1bGEiLCJnZXQiLCJtb3ZlcyIsImNvbnRhaW5lciIsImhhbmRsZSIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJpbnZhbGlkIiwidGFyZ2V0Iiwib24iLCIkYXBwbHkiLCJzZXRPcmRlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwiZ2V0SXRlbUJ5S2V5IiwiZ2V0QXR0cmlidXRlIiwia2V5IiwiJCRoYXNoS2V5IiwiYWRkSXRlbSIsInJlbW92ZUl0ZW0iLCJjb25maXJtX25lZWRlZCIsImNvbmZpcm0iLCJzcGxpY2UiLCJlZGl0SXRlbSIsIiRldmVudCIsImZvY3VzIiwic2NvcGVJdGVtIiwiZXhwYW5kSXRlbSIsImdldENvbW1lbnRUaW1lc3RhbXAiLCJjb21tZW50IiwidG9Mb2NhbGVTdHJpbmciLCJ0ZW1wbGF0ZVVybCIsIm9yY2hlc3RyYUNoZWNrbGlzdEl0ZW0iLCJhdXRvc2l6ZUlucHV0IiwiZWxlbSIsImdob3N0IiwibWluV2lkdGgiLCJzdHIiLCJlc2NhcGUiLCJyZXBsYWNlIiwiU1BBQ0UiLCJMRVNTX1RIQU4iLCJNT1JFX1RIQU4iLCJ2YWx1ZSIsImVsZW1TdHlsZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJlbGVtQ3NzVGV4dCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsInN0eWxlIiwiY3NzVGV4dCIsImlubmVySFRNTCIsIndpZHRoIiwic2V0dXBBdXRvc2l6ZXIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJib3hTaXppbmciLCJhZGRFdmVudExpc3RlbmVyIiwiYW5ndWxhciIsIm1vZHVsZSIsImRpcmVjdGl2ZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDRSxZQU1BLFNBQVNBLEdBQW1CQyxFQUFPQyxFQUFVQyxFQUFVQyxHQUNyRCxPQUNFQyxTQUFVLElBQ1ZDLE9BQ0VDLEtBQVEsSUFDUkMsT0FBVSxLQUNWQyxZQUFlLE1BRWpCQyxLQUFNLFNBQVNKLEVBQU9LLEVBQUlDLEdBQ3hCLEdBQUlDLElBQ0ZDLE1BQVMsNEdBR1RDLFdBQ0VQLE9BQVUsT0FDVlEsVUFBYSxHQUFJQyxNQUFLLEdBQUlBLE1BQVMsT0FDbkNDLEtBQVEsd0dBSVJWLE9BQVUsT0FDVlEsVUFBYSxHQUFJQyxNQUFLLEdBQUlBLE1BQVMsTUFDbkNDLEtBQVEsdURBR1JWLE9BQVUsR0FDVlUsS0FBUSxnSEFJVkMsU0FBVyxFQUNYQyxVQUFZLEVBQ1pDLFVBQVksRUFDWkMsTUFBUyxFQUNUQyxNQUFTLEVBSVhqQixHQUFNQyxLQUFPRCxFQUFNQyxTQUNuQkQsRUFBTUMsS0FBS2lCLE1BQVFsQixFQUFNQyxLQUFLaUIsUUFBVVgsR0FDeENQLEVBQU1DLEtBQUtrQixhQUFlbkIsRUFBTUMsS0FBS2tCLGlCQUNyQ25CLEVBQU1vQixlQUFnQixFQUd0QnRCLEVBQWlCdUIsUUFBUUMsZUFBZSxnQkFBaUIsV0FDdkR0QixFQUFNQyxLQUFLaUIsTUFB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RW1CLEdBQUswQixpQkFBaUIsUUFBUyxXQUM3QjlGLEVBQU1tRSxjQUFjQyxFQUFNQyxFQUFPQyxLQUluQzFFLEVBQVMsV0FDUEksRUFBTW1FLGNBQWNDLEVBQU1DLEVBQU9DLElBQ2hDLElBR0x0RSxFQUFNd0YsZUFBZW5GLEVBQUcyQixLQUFLLHFCQUFxQkcsSUFBSSxLQUV4RDhCLFlBQWEsOEVBblFqQjhCLFFBQ0dDLE9BQU8sMENBQ1BDLFVBQVUsc0JBQXVCLFFBQVMsV0FBWSxXQUFZLG1CQUFvQnZHLElBd0x6RnFHLFFBQ0dDLE9BQU8sMENBQ1BDLFVBQVUsMEJBQTJCLFFBQVMsV0FBWSxXQUFZLG1CQUFvQi9CIiwiZmlsZSI6Im9yY2hlc3RyYS9jb21tb24vY29tcG9uZW50cy9jaGVja2xpc3QvanMvZGlyZWN0aXZlcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnb3JjaGVzdHJhLmNvbW1vbi5jb21wb25lbnRzLmRpcmVjdGl2ZXMnKVxuICAgIC5kaXJlY3RpdmUoJ29yY2hlc3RyYUNoZWNrbGlzdCcsIFsnJGh0dHAnLCAnJHRpbWVvdXQnLCAnJGNvbXBpbGUnLCAnb3JjaGVzdHJhU2VydmljZScsIG9yY2hlc3RyYUNoZWNrbGlzdF0pO1xuXG4gIGZ1bmN0aW9uIG9yY2hlc3RyYUNoZWNrbGlzdCgkaHR0cCwgJHRpbWVvdXQsICRjb21waWxlLCBvcmNoZXN0cmFTZXJ2aWNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICBzY29wZToge1xuICAgICAgICAnZGF0YSc6ICc9JyxcbiAgICAgICAgJ2F1dGhvcic6ICdAPycsXG4gICAgICAgICdpbWFnZVByZWZpeCc6ICdAPycsXG4gICAgICB9LFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKSB7XG4gICAgICAgIHZhciBzYW1wbGVJdGVtID0ge1xuICAgICAgICAgICd0aXRsZSc6ICdVcGRhdGUgdGhlIGhlcm8gaW1hZ2UgJyArXG4gICAgICAgICAgICAnKFRoaXMgaXMgYSBzYW1wbGUgaXRlbSEgQ2xpY2sgb24gdGhlIHRleHQgdG8gZWRpdCBvciAnICtcbiAgICAgICAgICAgICdjbGljayB0byB0aGUgcmlnaHQgdG8gZXhwYW5kLiknLFxuICAgICAgICAgICdjb21tZW50cyc6IFt7XG4gICAgICAgICAgICAnYXV0aG9yJzogJ2phbmUnLFxuICAgICAgICAgICAgJ3RpbWVzdGFtcCc6IG5ldyBEYXRlKG5ldyBEYXRlKCkgLSAzICogNjAgKiA2MCAqIDEwMDApLFxuICAgICAgICAgICAgJ3RleHQnOiBcIlRoZSBoZXJvIGltYWdlIHlvdSd2ZSBjaG9zZW4gZG9lc24ndCBmaXQgXCIgK1xuICAgICAgICAgICAgICAnd2VsbCB3aXRoIHRoZSBjb2xvciBzY2hlbWUuIFRyeSBzb21ldGhpbmcgJyArXG4gICAgICAgICAgICAgICdsZXNzIHdhc2hlZCBvdXQ/J1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICdhdXRob3InOiAnam9obicsXG4gICAgICAgICAgICAndGltZXN0YW1wJzogbmV3IERhdGUobmV3IERhdGUoKSAtIDIgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICAgICAgICAndGV4dCc6ICdTb3VuZHMgZ29vZCEgSSBzd2FwcGVkIGl0IG91dCwgd2hhdCBkbyAnICtcbiAgICAgICAgICAgICAgJ3lvdSB0aGluaz8gJ1xuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICdhdXRob3InOiAnJyxcbiAgICAgICAgICAgICd0ZXh0JzogJ1RoaXMgaXMgYSBzYW1wbGUgY2hlY2tsaXN0IGNvbW1lbnQuICcgK1xuICAgICAgICAgICAgICAnWW91IGNhbiBhZGQgYSBuZXcgY29tbWVudCBmb3IgZWFjaCBuZXcgJyArXG4gICAgICAgICAgICAgICdyb3VuZCBvZiBpdGVyYXRpb24gb24geW91ciB3b3JrISdcbiAgICAgICAgICB9XSxcbiAgICAgICAgICAnY2hlY2tlZCc6IGZhbHNlLFxuICAgICAgICAgICdleHBhbmRlZCc6IGZhbHNlLFxuICAgICAgICAgICdyZWFkb25seSc6IHRydWUsXG4gICAgICAgICAgJ2luZGV4JzogMCxcbiAgICAgICAgICAnb3JkZXInOiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBjaGVja2xpc3QgZGF0YSBmb3IgYSBmcmVzaCB0YXNrXG4gICAgICAgIHNjb3BlLmRhdGEgPSBzY29wZS5kYXRhIHx8IHt9O1xuICAgICAgICBzY29wZS5kYXRhLml0ZW1zID0gc2NvcGUuZGF0YS5pdGVtcyB8fCBbc2FtcGxlSXRlbV07XG4gICAgICAgIHNjb3BlLmRhdGEuZGVsZXRlZEl0ZW1zID0gc2NvcGUuZGF0YS5kZWxldGVkSXRlbXMgfHwgW107XG4gICAgICAgIHNjb3BlLmhpZGVDb21wbGV0ZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBQcmVwYXJlIGRhdGEgZm9yIHN1Ym1pdFxuICAgICAgICBvcmNoZXN0cmFTZXJ2aWNlLnNpZ25hbHMucmVnaXN0ZXJTaWduYWwoJ3N1Ym1pdC5iZWZvcmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS5kYXRhLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgLy8gQWRkIGF1dGhvciBhbmQgZGF0ZSBpbmZvcm1hdGlvbiB0byB0aGUgbGF0ZXN0IGNvbW1lbnQuIFRoZW4sXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgY29tbWVudCBzcGFjZSBmb3IgdGhlIG5leHQgd29ya2VyLlxuICAgICAgICAgICAgaWYgKGl0ZW0uY29tbWVudHNbaXRlbS5jb21tZW50cy5sZW5ndGggLSAxXS50ZXh0KSB7XG4gICAgICAgICAgICAgIGl0ZW0uY29tbWVudHNbaXRlbS5jb21tZW50cy5sZW5ndGggLSAxXS5hdXRob3IgPSBzY29wZS5hdXRob3I7XG4gICAgICAgICAgICAgIGl0ZW0uY29tbWVudHNbaXRlbS5jb21tZW50cy5sZW5ndGggLSAxXS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICBpdGVtLmNvbW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICdhdXRob3InOiAnJyxcbiAgICAgICAgICAgICAgICAndGV4dCc6ICcnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBvcmNoZXN0cmFTZXJ2aWNlLnNpZ25hbHMucmVnaXN0ZXJTaWduYWwoJ3N1Ym1pdC5lcnJvcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjb3BlLmRhdGEuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAvLyBSZXZlcnQgY29tbWVudCBjaGFuZ2VzIGZyb20gc3VibWl0LmJlZm9yZSBoYW5kbGVyXG4gICAgICAgICAgICBpZiAoaXRlbS5jb21tZW50c1tpdGVtLmNvbW1lbnRzLmxlbmd0aCAtIDFdLnRleHQpIHtcbiAgICAgICAgICAgICAgaXRlbS5jb21tZW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgaXRlbS5jb21tZW50c1tpdGVtLmNvbW1lbnRzLmxlbmd0aCAtIDFdLmF1dGhvciA9ICcnO1xuICAgICAgICAgICAgICBpdGVtLmNvbW1lbnRzW2l0ZW0uY29tbWVudHMubGVuZ3RoIC0gMV0udGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZXR1cCBkcmFnIHRvIHJlb3JkZXJcbiAgICAgICAgc2NvcGUucHJldmVudEFjdGlvbiA9IGZhbHNlO1xuICAgICAgICB2YXIgY2hlY2tsaXN0Q29udGFpbmVyID0gZWwuZmluZCgndWwuY2hlY2tsaXN0Jyk7XG4gICAgICAgIHZhciBkcmFrZSA9IGRyYWd1bGEoW2NoZWNrbGlzdENvbnRhaW5lci5nZXQoMCldLCB7XG4gICAgICAgICAgbW92ZXM6IGZ1bmN0aW9uKGVsLCBjb250YWluZXIsIGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gSXRlbSB0aXRsZSBpbnB1dCBvbmx5IHdoZW4gcmVhZG9ubHkgKHNvIHVzZXIgY2FuIHNlbGVjdCB0ZXh0IHdpdGhpbiBpbnB1dClcbiAgICAgICAgICAgIC8vIEl0ZW0gdGl0bGUgY29udGFpbmVyIG91dHNpZGUgb2YgaW5wdXRcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGUuY2xhc3NOYW1lLmluZGV4T2YoJ2NoZWNrbGlzdC1pdGVtJykgPj0gMCB8fCAoaGFuZGxlLmNsYXNzTmFtZS5pbmRleE9mKCdpdGVtLXRpdGxlLWlucHV0JykgPj0gMCAmJiBoYW5kbGUuY2xhc3NOYW1lLmluZGV4T2YoJ3JlYWRvbmx5JykgPj0gMCkgfHwgKGhhbmRsZS5jbGFzc05hbWUuaW5kZXhPZignaXRlbS10aXRsZScpID49IDAgJiYgaGFuZGxlLmNsYXNzTmFtZS5pbmRleE9mKCdpdGVtLXRpdGxlLWlucHV0JykgPCAwKTtcblxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW52YWxpZDogZnVuY3Rpb24oZWwsIHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIHNjb3BlLnByZXZlbnRBY3Rpb247XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQcmV2ZW50IGFub3RoZXIgZHJhZyBmcm9tIG9jY3VyaW5nIHVudGlsIHRoZSBjdXJyZW50IGRyYWcgaXNcbiAgICAgICAgLy8gY29tcGxldGVkIGFuZCB0aGUgbmV3IG9yZGVyIGlzIHNldC5cbiAgICAgICAgZHJha2Uub24oJ2RyYWcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY29wZS5wcmV2ZW50QWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRyYWtlLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2V0T3JkZXIoKTtcbiAgICAgICAgICBzY29wZS5wcmV2ZW50QWN0aW9uID0gZmFsc2U7XG4gICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIERldGVybWluZXMgYW5kIHNhdmVzIHRoZSBvcmRlciBjaGFuZ2VkIGJ5IGRyYWcgZXZlbnRcbiAgICAgICAgdmFyIHNldE9yZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGl0ZW1zID0gZWwuZ2V0KDApLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2xpc3QtaXRlbScpO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTtcbiAgICAgICAgICAgIGdldEl0ZW1CeUtleShpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKSkub3JkZXIgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZXRyaWV2ZXMgY2hlY2tsaXN0IGl0ZW0gYmFzZWQgb24gYW5ndWxhciBvYmplY3Qga2V5XG4gICAgICAgIHZhciBnZXRJdGVtQnlLZXkgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICB2YXIgbWF0Y2g7XG4gICAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgICAgZm9yICh2YXIgaSA9IHNjb3BlLmRhdGEuaXRlbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGl0ZW0gPSBzY29wZS5kYXRhLml0ZW1zW2ldO1xuICAgICAgICAgICAgaWYgKGl0ZW0uJCRoYXNoS2V5ID09PSBrZXkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFkZCBuZXcgY2hlY2tsaXN0IGl0ZW1cbiAgICAgICAgc2NvcGUuYWRkSXRlbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjb3BlLmRhdGEuaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAndGl0bGUnOiAnJyxcbiAgICAgICAgICAgICdjb21tZW50cyc6IFt7XG4gICAgICAgICAgICAgICdhdXRob3InOiBzY29wZS5hdXRob3IsXG4gICAgICAgICAgICAgICd0ZXh0JzogJydcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgJ2NoZWNrZWQnOiBmYWxzZSxcbiAgICAgICAgICAgICdleHBhbmRlZCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3JlYWRvbmx5JzogdHJ1ZSxcbiAgICAgICAgICAgICdvcmRlcic6IHNjb3BlLmRhdGEuaXRlbXMubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmVtb3ZlIGNoZWNrbGlzdCBpdGVtXG4gICAgICAgIHNjb3BlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbihpdGVtLCBjb25maXJtX25lZWRlZCkge1xuICAgICAgICAgIHZhciBpbmRleCA9IHNjb3BlLmRhdGEuaXRlbXMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICBpZiAoIWNvbmZpcm1fbmVlZGVkIHx8IGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBpdGVtPycpKSB7XG4gICAgICAgICAgICBzY29wZS5wcmV2ZW50QWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHNjb3BlLmRhdGEuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHNjb3BlLmRhdGEuZGVsZXRlZEl0ZW1zLnB1c2goaXRlbSk7XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IG9yZGVyIGFmdGVyICRkaWdlc3QgYmxvY2sgKG9uY2UgaXRlbSBoYXMgYmVlbiByZW1vdmVkKVxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNldE9yZGVyKCk7XG4gICAgICAgICAgICAgIHNjb3BlLnByZXZlbnRBY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIH0sIDAsIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQWxsb3cgY2hlY2tsaXN0IHRpdGxlIHRvIGJlIGVkaXRlZFxuICAgICAgICBzY29wZS5lZGl0SXRlbSA9IGZ1bmN0aW9uKGl0ZW0sICRldmVudCkge1xuICAgICAgICAgIGlmIChpdGVtLnJlYWRvbmx5KSB7XG4gICAgICAgICAgICAvLyBJdGVtIHdpbGwgYmVjb21lIGVkaXRhYmxlXG4gICAgICAgICAgICBpZiAoJGV2ZW50KSB7XG4gICAgICAgICAgICAgIC8vIFNldCBmb2N1cyBvbiBpbnB1dFxuICAgICAgICAgICAgICAkZXZlbnQudGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY29wZS5kYXRhLml0ZW1zLmZvckVhY2goZnVuY3Rpb24oc2NvcGVJdGVtKSB7XG4gICAgICAgICAgICAgIHNjb3BlSXRlbS5yZWFkb25seSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbS5yZWFkb25seSA9ICFpdGVtLnJlYWRvbmx5O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEV4cGFuZCBjaGVja2xpc3QgaXRlbSB0byBzaG93IGNvbW1lbnRzXG4gICAgICAgIHNjb3BlLmV4cGFuZEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgaXRlbS5leHBhbmRlZCA9ICFpdGVtLmV4cGFuZGVkO1xuICAgICAgICAgIHNjb3BlLmRhdGEuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihzY29wZUl0ZW0pIHtcbiAgICAgICAgICAgIHNjb3BlSXRlbS5yZWFkb25seSA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmV0dXJuIGxvY2FsaXplZCBjb21tZW50IHRpbWVzdGFtcFxuICAgICAgICBzY29wZS5nZXRDb21tZW50VGltZXN0YW1wID0gZnVuY3Rpb24oY29tbWVudCkge1xuICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShjb21tZW50LnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvb3JjaGVzdHJhL2NvbW1vbi9jb21wb25lbnRzL2NoZWNrbGlzdC9wYXJ0aWFscy9jaGVja2xpc3QuaHRtbCdcbiAgICB9O1xuICB9XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ29yY2hlc3RyYS5jb21tb24uY29tcG9uZW50cy5kaXJlY3RpdmVzJylcbiAgICAuZGlyZWN0aXZlKCdvcmNoZXN0cmFDaGVja2xpc3RJdGVtJywgWyckaHR0cCcsICckdGltZW91dCcsICckY29tcGlsZScsICdvcmNoZXN0cmFTZXJ2aWNlJywgb3JjaGVzdHJhQ2hlY2tsaXN0SXRlbV0pO1xuXG4gIGZ1bmN0aW9uIG9yY2hlc3RyYUNoZWNrbGlzdEl0ZW0oJGh0dHAsICR0aW1lb3V0LCAkY29tcGlsZSwgb3JjaGVzdHJhU2VydmljZSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBhdHRyKSB7XG4gICAgICAgIC8vIER5bmFtaWNhbGx5IGF1dG9zaXplIGEgdGV4dCBpbnB1dCB0byBmaXQgaXRzIGNvbnRlbnRzLlxuICAgICAgICAvLyBNb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS95dWFucWluZy9hdXRvc2l6ZS1pbnB1dCAoTUlUIGxpY2Vuc2UpLlxuICAgICAgICBzY29wZS5hdXRvc2l6ZUlucHV0ID0gZnVuY3Rpb24oZWxlbSwgZ2hvc3QsIG1pbldpZHRoLCBzdHIpIHtcbiAgICAgICAgICAvLyBDb21waWxlIGFuZCBjYWNoZSB0aGUgbmVlZGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG4gICAgICAgICAgdmFyIFNQQUNFID0gL1xccy9nO1xuICAgICAgICAgIHZhciBMRVNTX1RIQU4gPSAvPi9nO1xuICAgICAgICAgIHZhciBNT1JFX1RIQU4gPSAvPC9nO1xuXG4gICAgICAgICAgLy8gV2UgbmVlZCB0byBzd2FwIG91dCB0aGVzZSBjaGFyYWN0ZXJzIHdpdGggdGhlaXIgY2hhcmFjdGVyLWVudGl0eVxuICAgICAgICAgIC8vIGVxdWl2YWxlbnRzIGJlY2F1c2Ugd2UncmUgYXNzaWduaW5nIHRoZSByZXN1bHRpbmcgc3RyaW5nIHRvXG4gICAgICAgICAgLy8gYGdob3N0LmlubmVySFRNTGAuXG4gICAgICAgICAgZnVuY3Rpb24gZXNjYXBlKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKFNQQUNFLCAnJm5ic3A7JylcbiAgICAgICAgICAgICAgLnJlcGxhY2UoTEVTU19USEFOLCAnJmx0OycpXG4gICAgICAgICAgICAgIC5yZXBsYWNlKE1PUkVfVEhBTiwgJyZndDsnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdHIgPSBzdHIgfHwgZWxlbS52YWx1ZSB8fCAnJztcblxuICAgICAgICAgIC8vIEFwcGx5IHRoZSBgZm9udC1zaXplYCBhbmQgYGZvbnQtZmFtaWx5YCBzdHlsZXMgb2YgYGVsZW1gIG9uIHRoZVxuICAgICAgICAgIC8vIGBnaG9zdGAgZWxlbWVudC5cbiAgICAgICAgICB2YXIgZWxlbVN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSk7XG4gICAgICAgICAgdmFyIGVsZW1Dc3NUZXh0ID0gJ2ZvbnQtZmFtaWx5OicgKyBlbGVtU3R5bGUuZm9udEZhbWlseSArXG4gICAgICAgICAgICAnO2ZvbnQtc2l6ZTonICsgZWxlbVN0eWxlLmZvbnRTaXplO1xuXG4gICAgICAgICAgZ2hvc3Quc3R5bGUuY3NzVGV4dCArPSBlbGVtQ3NzVGV4dDtcbiAgICAgICAgICBnaG9zdC5pbm5lckhUTUwgPSBlc2NhcGUoc3RyKTtcbiAgICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShnaG9zdCkud2lkdGg7XG4gICAgICAgICAgaWYgKHdpZHRoID09PSAnMHB4Jykge1xuICAgICAgICAgICAgd2lkdGggPSBtaW5XaWR0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbS5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdGhhdDpcbiAgICAgICAgLy8gMS4gQ29waWVzIHRoZSBgZm9udC1mYW1pbHlgIGFuZCBgZm9udC1zaXplYCBvZiBvdXIgYGVsZW1gIG9udG8gYGdob3N0YFxuICAgICAgICAvLyAyLiBTZXRzIHRoZSBjb250ZW50cyBvZiBgZ2hvc3RgIHRvIHRoZSBzcGVjaWZpZWQgYHN0cmBcbiAgICAgICAgLy8gMy4gQ29waWVzIHRoZSB3aWR0aCBvZiBgZ2hvc3RgIG9udG8gb3VyIGBlbGVtYFxuICAgICAgICBzY29wZS5zZXR1cEF1dG9zaXplciA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAgICAgICAvLyBDcmVhdGUgdGhlIGBnaG9zdGAgZWxlbWVudCwgd2l0aCBpbmxpbmUgc3R5bGVzIHRvIGhpZGUgaXQgYW5kIGVuc3VyZSB0aGF0XG4gICAgICAgICAgLy8gdGhlIHRleHQgaXMgYWxsIG9uIGEgc2luZ2xlIGxpbmUuXG4gICAgICAgICAgdmFyIGdob3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgZ2hvc3QuY2xhc3NOYW1lID0gJ2dob3N0JztcbiAgICAgICAgICBnaG9zdC5zdHlsZS5jc3NUZXh0ID0gJ2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTppbmxpbmUtYmxvY2s7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3Zpc2liaWxpdHk6aGlkZGVuO3doaXRlLXNwYWNlOm5vd3JhcDsnO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2hvc3QpO1xuXG4gICAgICAgICAgLy8gRm9yY2UgYGNvbnRlbnQtYm94YCBvbiB0aGUgYGVsZW1gLlxuICAgICAgICAgIGVsZW0uc3R5bGUuYm94U2l6aW5nID0gJ2NvbnRlbnQtYm94JztcblxuICAgICAgICAgIHZhciBtaW5XaWR0aCA9IHNjb3BlLmF1dG9zaXplSW5wdXQoZWxlbSwgZ2hvc3QsIDAsIGVsZW0uZ2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicpKTtcblxuICAgICAgICAgIC8vIEF1dG9zaXplIGlucHV0IG9uIHZhbHVlIGNoYW5nZVxuICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNjb3BlLmF1dG9zaXplSW5wdXQoZWxlbSwgZ2hvc3QsIG1pbldpZHRoKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIEF1dG9zaXplIGlucHV0IHdoZW4gY2hlY2tsaXN0IGl0ZW0gZmlyc3QgYWRkZWQgdG8gdGhlIERPTVxuICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2NvcGUuYXV0b3NpemVJbnB1dChlbGVtLCBnaG9zdCwgbWluV2lkdGgpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLnNldHVwQXV0b3NpemVyKGVsLmZpbmQoJy5pdGVtLXRpdGxlIGlucHV0JykuZ2V0KDApKTtcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvb3JjaGVzdHJhL2NvbW1vbi9jb21wb25lbnRzL2NoZWNrbGlzdC9wYXJ0aWFscy9jaGVja2xpc3QtaXRlbS5odG1sJ1xuICAgIH07XG4gIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
